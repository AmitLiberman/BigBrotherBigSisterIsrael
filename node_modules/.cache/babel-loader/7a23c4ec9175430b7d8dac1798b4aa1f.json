{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"./DeleteUser.css\";import firebase from\"../../config/Firebase\";var DeleteUser=/*#__PURE__*/function(_Component){_inherits(DeleteUser,_Component);var _super=_createSuper(DeleteUser);function DeleteUser(){var _this;_classCallCheck(this,DeleteUser);_this=_super.call(this);_this.valid=function(querySnapshot){_this.usersRef.where('id','==',_this.state.id).get().then(function(querySnapshot){if(querySnapshot.empty){alert(\"המשתמש שאתה מנסה למחוק לא קיים במערכת.\");throw Error(500);}}).catch(function(e){return console.log(\"משתמש לא קיים במערכת\");});};_this.deleteUser=function(event){event.preventDefault();_this.valid();_this.usersRef.where('id','==',_this.state.id).limit(1).get().then(function(querySnapshot){querySnapshot.forEach(function(doc){_this.setState({email:doc.data().email},function(){var con=window.confirm(\"האם אתה בטוח שברצונך למחוק את \"+doc.data().fName+\" \"+doc.data().lName+\"?\");if(con){if(typeof doc.data().link_user!=='undefined'&&doc.data().link_user!==\"\")_this.usersRef.doc(doc.data().link_user).update({link_user:\"\"});doc.ref.delete().then(function(){alert(\"\\u05D4\\u05DE\\u05E9\\u05EA\\u05DE\\u05E9 \".concat(doc.data().fName+\" \"+doc.data().lName,\" \\u05E0\\u05DE\\u05D7\\u05E7 \\u05DE\\u05D4\\u05DE\\u05E2\\u05E8\\u05DB\\u05EA.\"));_this.setState({id:\"\"});});}});});}).catch(function(e){return console.log(e.name);});};_this.state={id:\"\",email:\"\"};_this.usersRef=firebase.firestore().collection('Users');return _this;}_createClass(DeleteUser,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"form\",{className:\"del-user-form\",onSubmit:this.deleteUser},/*#__PURE__*/React.createElement(\"h1\",{className:\"delete-title\"},/*#__PURE__*/React.createElement(\"u\",null,\"\\u05DE\\u05D7\\u05D9\\u05E7\\u05EA \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"label\",{className:\"del-lab\",htmlFor:\"inputPassword3\"},\"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",className:\"form-control\",id:\"inputPassword3\",placeholder:\"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA\",value:this.state.id,onChange:function onChange(e){return _this2.setState({id:e.target.value});},required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-sm-10\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-danger del-btn\"},\"\\u05D4\\u05E1\\u05E8 \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\"))));}}]);return DeleteUser;}(Component);export default DeleteUser;","map":{"version":3,"sources":["C:/Users/ahmad/Downloads/BigBrotherBigSisterIsrael-master/BigBrotherBigSisterIsrael-master/src/adminComponents/partial/DeleteUser.jsx"],"names":["React","Component","firebase","DeleteUser","valid","querySnapshot","usersRef","where","state","id","get","then","empty","alert","Error","catch","e","console","log","deleteUser","event","preventDefault","limit","forEach","doc","setState","email","data","con","window","confirm","fName","lName","link_user","update","ref","delete","name","firestore","collection","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./DeleteUser.css\";\r\nimport firebase from \"../../config/Firebase\"\r\n\r\nclass DeleteUser extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      id: \"\",\r\n      email: \"\"\r\n    }\r\n    this.usersRef = firebase.firestore().collection('Users');\r\n  }\r\n\r\n  valid = (querySnapshot) => {\r\n    this.usersRef.where('id', '==', this.state.id)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        if (querySnapshot.empty) {\r\n          alert(\"המשתמש שאתה מנסה למחוק לא קיים במערכת.\");\r\n          throw Error(500);\r\n        }\r\n      })\r\n      .catch((e) => console.log(\"משתמש לא קיים במערכת\"));\r\n  }\r\n\r\n  deleteUser = (event) => {\r\n    event.preventDefault();\r\n    this.valid();\r\n    this.usersRef.where('id', '==', this.state.id)\r\n      .limit(1)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach(doc => {\r\n          this.setState({ email: doc.data().email }, () => {\r\n            var con = window.confirm(\"האם אתה בטוח שברצונך למחוק את \" + doc.data().fName + \" \" + doc.data().lName + \"?\")\r\n            if (con) {\r\n              if (typeof (doc.data().link_user) !== 'undefined' && doc.data().link_user !== \"\")\r\n                this.usersRef.doc(doc.data().link_user).update({ link_user: \"\" })\r\n              doc.ref.delete()\r\n                .then(() => {\r\n                  alert(`המשתמש ${doc.data().fName + \" \" + doc.data().lName} נמחק מהמערכת.`);\r\n                  this.setState({ id: \"\" })\r\n                }\r\n                );\r\n            }\r\n          });\r\n        });\r\n      })\r\n      .catch((e) => console.log(e.name))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n\r\n      <form className=\"del-user-form\" onSubmit={this.deleteUser}>\r\n        <h1 className=\"delete-title\"><u>מחיקת משתמש</u></h1>\r\n        <div className=\"form-group row\">\r\n          <label className=\"del-lab\" htmlFor=\"inputPassword3\">תעודת זהות</label>\r\n          <div className=\"col-sm-10\">\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              id=\"inputPassword3\"\r\n              placeholder=\"תעודת זהות\"\r\n              value={this.state.id}\r\n              onChange={(e) => this.setState({ id: e.target.value })} required />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"form-group row\">\r\n          <div className=\"col-sm-10\">\r\n            <button type=\"submit\" className=\"btn btn-danger del-btn\">הסר משתמש</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DeleteUser;\r\n"]},"metadata":{},"sourceType":"module"}