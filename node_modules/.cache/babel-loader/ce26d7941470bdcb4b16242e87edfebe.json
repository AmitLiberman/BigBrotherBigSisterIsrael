{"ast":null,"code":"var _jsxFileName = \"/Users/wadie/BigBrotherBigSisterIsrael/src/adminComponents/partial/LinkUsers.jsx\";\nimport React, { Component } from \"react\";\nimport firebase from \"../../config/Firebase\";\nimport \"./LinkUsers.css\";\n\nclass LinkUsers extends Component {\n  constructor() {\n    super();\n\n    this.isValid = (querySnapshot, type) => {\n      if (querySnapshot.empty) {\n        alert(\"ה\" + type + \" לא קיים במערכת\");\n        throw Error(500);\n      }\n\n      querySnapshot.forEach(doc => {\n        if (doc.data().type !== type) {\n          alert(\"המשתמש אינו \" + type);\n          throw Error(500);\n        }\n\n        if (type === \"חניך\") this.setState({\n          studentRef: doc.ref.id,\n          studentName: doc.data().fName + \" \" + doc.data().lName\n        });else if (type === \"חונך\") this.setState({\n          mentorRef: doc.ref.id,\n          mentorName: doc.data().fName + \" \" + doc.data().lName\n        });\n      });\n    };\n\n    this.verifyUsers = () => {\n      var studentId = this.state.studentId;\n      var mentorId = this.state.mentorId;\n      this.usersRef.where('id', '==', studentId).limit(1).get().then(querySnapshot => this.isValid(querySnapshot, \"חניך\")).then(() => this.usersRef.where('id', '==', mentorId).limit(1).get().then(querySnapshot => this.isValid(querySnapshot, \"חונך\"))).then(() => {\n        var con = window.confirm(\"האם אתה בטוח לבצונך לקשר את החונך \" + this.state.mentorName + \" לחניך \" + this.state.studentName + \"?\");\n\n        if (con) {\n          this.linkUser(studentId);\n          this.linkUser(mentorId);\n          console.log(\"המשתמשים עודכנו בהצלחה!\");\n          alert(\"עודכן בהצלחה!\\n\" + this.state.mentorName + \" הוא החונך של \" + this.state.studentName + \".\");\n          this.setState({\n            studentId: \"\",\n            mentorId: \"\"\n          });\n        }\n      }).catch(() => console.log(\"Error in adding new user\"));\n    };\n\n    this.linkUser = curr => {\n      var studentId = this.state.studentId;\n      var mentorId = this.state.mentorId;\n      var studentRef = this.state.studentRef;\n      var mentorRef = this.state.mentorRef;\n      this.usersRef.where('id', '==', curr).limit(1).get().then(querySnapshot => {\n        querySnapshot.forEach(doc => {\n          if (curr === studentId) doc.ref.update({\n            link_user: mentorRef\n          });else if (curr === mentorId) doc.ref.update({\n            link_user: studentRef\n          });\n        });\n      }).catch(e => console.log(e.name));\n    };\n\n    this.addLink = event => {\n      event.preventDefault();\n      this.verifyUsers();\n    };\n\n    this.state = {\n      studentId: \"\",\n      mentorId: \"\",\n      studentName: \"\",\n      mentorName: \"\",\n      studentRef: \"\",\n      mentorRef: \"\"\n    };\n    this.usersRef = firebase.firestore().collection('Users');\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"ad-user-form\",\n      onSubmit: this.addLink,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"header\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"add-user-h\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"u\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 25\n      }\n    }, \" \\u05E7\\u05D9\\u05E9\\u05D5\\u05E8 \\u05D7\\u05E0\\u05D9\\u05DA \\u05DC\\u05D7\\u05D5\\u05E0\\u05DA\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"first-link-input-btn\",\n      htmlFor: \"inputLinkFirstName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 25\n      }\n    }, \"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA \\u05D7\\u05E0\\u05D9\\u05DA\"), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      type: \"number\",\n      className: \"form-control\",\n      id: \"inputLinkFirstName\",\n      value: this.state.studentId,\n      placeholder: \"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA \\u05D7\\u05E0\\u05D9\\u05DA\",\n      title: \"\\u05E9\\u05DD \\u05E4\\u05E8\\u05D8\\u05D9\",\n      onChange: e => this.setState({\n        studentId: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"last-link-input-btn\",\n      htmlFor: \"inputLinkLastName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, \"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA \\u05D7\\u05D5\\u05E0\\u05DA\"), /*#__PURE__*/React.createElement(\"input\", {\n      required: true,\n      type: \"number\",\n      className: \"form-control\",\n      id: \"inputLinkLastName\",\n      value: this.state.mentorId,\n      placeholder: \"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA \\u05D7\\u05D5\\u05E0\\u05DA\",\n      onChange: e => this.setState({\n        mentorId: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary link-users-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 25\n      }\n    }, \"\\u05D4\\u05D5\\u05E1\\u05E3 \\u05E7\\u05D9\\u05E9\\u05D5\\u05E8\"))));\n  }\n\n}\n\nexport default LinkUsers;","map":{"version":3,"sources":["/Users/wadie/BigBrotherBigSisterIsrael/src/adminComponents/partial/LinkUsers.jsx"],"names":["React","Component","firebase","LinkUsers","constructor","isValid","querySnapshot","type","empty","alert","Error","forEach","doc","data","setState","studentRef","ref","id","studentName","fName","lName","mentorRef","mentorName","verifyUsers","studentId","state","mentorId","usersRef","where","limit","get","then","con","window","confirm","linkUser","console","log","catch","curr","update","link_user","e","name","addLink","event","preventDefault","firestore","collection","render","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport firebase from \"../../config/Firebase\"\r\nimport \"./LinkUsers.css\";\r\n\r\nclass LinkUsers extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            studentId: \"\",\r\n            mentorId: \"\",\r\n            studentName: \"\",\r\n            mentorName: \"\",\r\n            studentRef: \"\",\r\n            mentorRef: \"\"\r\n        }\r\n        this.usersRef = firebase.firestore().collection('Users');\r\n    }\r\n\r\n    isValid = (querySnapshot, type) => {\r\n        if (querySnapshot.empty) {\r\n            alert(\"ה\" + type + \" לא קיים במערכת\")\r\n            throw Error(500);\r\n        }\r\n        querySnapshot.forEach(doc => {\r\n            if (doc.data().type !== type) {\r\n                alert(\"המשתמש אינו \" + type);\r\n                throw Error(500);\r\n            }\r\n            if (type === \"חניך\")\r\n                this.setState({ studentRef: doc.ref.id, studentName: doc.data().fName + \" \" + doc.data().lName })\r\n            else if (type === \"חונך\")\r\n                this.setState({ mentorRef: doc.ref.id, mentorName: doc.data().fName + \" \" + doc.data().lName })\r\n        });\r\n    }\r\n\r\n    verifyUsers = () => {\r\n        var studentId = this.state.studentId;\r\n        var mentorId = this.state.mentorId;\r\n        this.usersRef.where('id', '==', studentId)\r\n            .limit(1)\r\n            .get()\r\n            .then((querySnapshot) => this.isValid(querySnapshot, \"חניך\"))\r\n            .then(() => this.usersRef.where('id', '==', mentorId)\r\n                .limit(1)\r\n                .get()\r\n                .then((querySnapshot) => this.isValid(querySnapshot, \"חונך\")))\r\n            .then(() => {\r\n                var con = window.confirm(\"האם אתה בטוח לבצונך לקשר את החונך \" + this.state.mentorName + \" לחניך \" + this.state.studentName + \"?\")\r\n                if (con) {\r\n                    this.linkUser(studentId);\r\n                    this.linkUser(mentorId);\r\n                    console.log(\"המשתמשים עודכנו בהצלחה!\");\r\n                    alert(\"עודכן בהצלחה!\\n\" + this.state.mentorName + \" הוא החונך של \" + this.state.studentName + \".\");\r\n                    this.setState({ studentId: \"\", mentorId: \"\" });\r\n                }\r\n            })\r\n            .catch(() => console.log(\"Error in adding new user\"));\r\n    }\r\n\r\n    linkUser = (curr) => {\r\n        var studentId = this.state.studentId;\r\n        var mentorId = this.state.mentorId;\r\n        var studentRef = this.state.studentRef;\r\n        var mentorRef = this.state.mentorRef;\r\n        this.usersRef.where('id', '==', curr)\r\n            .limit(1)\r\n            .get()\r\n            .then((querySnapshot) => {\r\n                querySnapshot.forEach((doc) => {\r\n                    if (curr === studentId)\r\n                        doc.ref.update({ link_user: mentorRef })\r\n                    else if (curr === mentorId)\r\n                        doc.ref.update({ link_user: studentRef })\r\n                }\r\n                );\r\n            }).catch((e) => console.log(e.name));\r\n    }\r\n\r\n    addLink = (event) => {\r\n        event.preventDefault();\r\n        this.verifyUsers();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"ad-user-form\" onSubmit={this.addLink}>\r\n                <header className=\"title\">\r\n                    <h1 className=\"add-user-h\">\r\n                        <u> קישור חניך לחונך</u>\r\n                    </h1>\r\n                </header>\r\n                <div className=\"form-row\">\r\n                    <div className=\"form-group col-md-6\">\r\n                        <label className=\"first-link-input-btn\" htmlFor=\"inputLinkFirstName\">תעודת זהות חניך</label>\r\n                        <input\r\n                            required\r\n                            type=\"number\"\r\n                            className=\"form-control\"\r\n                            id=\"inputLinkFirstName\"\r\n                            value={this.state.studentId}\r\n                            placeholder=\"תעודת זהות חניך\"\r\n                            title=\"שם פרטי\"\r\n                            onChange={(e) => this.setState({ studentId: e.target.value })}\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group col-md-6\">\r\n                        <label className=\"last-link-input-btn\" htmlFor=\"inputLinkLastName\">תעודת זהות חונך</label>\r\n                        <input\r\n                            required\r\n                            type=\"number\"\r\n                            className=\"form-control\"\r\n                            id=\"inputLinkLastName\"\r\n                            value={this.state.mentorId}\r\n                            placeholder=\"תעודת זהות חונך\"\r\n                            onChange={(e) => this.setState({ mentorId: e.target.value })}\r\n                        />\r\n                        <button type=\"submit\" className=\"btn btn-primary link-users-btn\">\r\n                            הוסף קישור\r\n                         </button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default LinkUsers;"]},"metadata":{},"sourceType":"module"}