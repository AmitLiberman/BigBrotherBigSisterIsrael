{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Meeting from\"../navBarComponents/meetingComponents/Meeting\";import WallPost from\"../navBarComponents/wallComponents/wall/WallPost\";import Profile from\"../navBarComponents/wallComponents/profile/Profile\";import HomePage from\"../navBarComponents/homeComponents/HomePage\";import VideoPage from\"../navBarComponents/videoComponents/main/VideoPage\";import ChangePassword from\"./ChangePassword\";import\"./App.css\";import\"bootstrap/dist/css/bootstrap.min.css\";import firebase from\"../config/Firebase\";import Loader from'react-loader-spinner';import logo from'../static_pictures/big_brothers_big_sisters.png';import{BrowserRouter as Router,Switch,Route,NavLink,Redirect}from\"react-router-dom\";var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.logout=function(){var logOutConfirm=window.confirm(\"האם אתה בטוח שברצונך להתנתק מהמערכת?\");if(!logOutConfirm)return;if(_this.state.isMounted)_this.updateDisconnection();firebase.auth().signOut().then(function(){console.log(\"Successful sign-out\");// Sign-out successful.\n}).catch(function(error){console.log(\"Sign-out error\");// An error happened.\n});};_this.resizeWin=function(e){_this.setState({zoom:Math.min(window.innerHeight/620,window.innerWidth/1536)});};_this.getUserName=function(){if(firebase.auth().currentUser===null)return;var currUserUid=firebase.firestore().collection('Users').doc(_this.currUserUid);currUserUid.get().then(function(uDetail){if(!uDetail.exists){alert(\"משתמש זה לא קיים יותר במערכת. אנא פנה למנהל.\");firebase.auth().signOut();}else{_this.setState({userDetails:uDetail.data()},function(){return _this.setState({loadingUser:false});});}}).catch(function(e){return console.log(e.name);});};_this.setLinkedUser=function(doc){_this.setState({linkedUserDetails:doc.data()});_this.setState({loadingLinkedUser:false});};_this.getLinkedUser=function(){var docRef=_this.usersRef.doc(_this.state.userDetails.link_user);docRef.get().then(function(doc){return _this.setLinkedUser(doc);}).catch(function(e){return console.log(e.name);});};_this.getNextMeeting=function(){var meetingRef=_this.usersRef.doc(_this.currUserUid).collection('Meetings');meetingRef.where('timeStamp',\">=\",Date.now()/1000-900).orderBy(\"timeStamp\",\"asc\").limit(1).get().then(function(querySnap){if(!querySnap.empty)_this.setState({next_meeting:querySnap.docs[0].data()});else _this.setState({next_meeting:null});}).then(function(){return _this.setState({loadingNextMeeting:false});}).catch(function(e){return console.log(e.name);});};_this.checkIfVideo=function(event){if(_this.state.isOnVideo){var con=window.confirm(\"האם אתה בטוח שברצונך לסיים את שיחת הוידאו?\");if(con)_this.setState({directVid:false,hostVid:null,isOnVideo:false});else event.preventDefault();}else if(_this.state.notAllowed)_this.setState({directVid:false,hostVid:null,isOnVideo:false});};_this.modifyVideoStream=function(localSt,remoteSt){_this.setState({isOnVideo:true});};_this.modifyVideoNotAllowed=function(){_this.setState({notAllowed:true});};_this.updateConnection=function(){var myConnectionsRef=firebase.database().ref('users/'+_this.state.userDetails.id+'/connected');var lastOnlineRef=firebase.database().ref('users/'+_this.state.userDetails.id+'/lastOnline');var friendConnectionsRef=firebase.database().ref('users/'+_this.state.linkedUserDetails.id+'/connected');var friendOnlineRef=firebase.database().ref('users/'+_this.state.linkedUserDetails.id+'/lastOnline');_this.connectionRef.on('value',function(snap){if(snap.val()===true){var con=myConnectionsRef.push();con.onDisconnect().remove(_this.removeDocs);_this.setState({connectionKey:con.key});con.set(true);lastOnlineRef.onDisconnect().set(firebase.database.ServerValue.TIMESTAMP);}});friendConnectionsRef.on('value',function(snap){if(snap.val()!==null)_this.setState({otherUserConnection:true});else _this.setState({otherUserConnection:false});});friendOnlineRef.on('value',function(snap){_this.setState({otherUserLastOnline:snap.val()});});};_this.removeDocs=function(){var ref=_this.usersRef.doc(_this.state.userDetails.link_user).collection('Rooms');ref.get().then(function(querySnapshot){querySnapshot.forEach(function(doc){doc.ref.collection('first_participant').get().then(function(subSnap){subSnap.forEach(function(subDoc){return subDoc.ref.delete();});doc.ref.collection('second_participant').get().then(function(subSnap){return subSnap.forEach(function(subDoc){return subDoc.ref.delete();});});}).then(function(){doc.ref.delete();});});}).then(function(){console.log(\"Docs has removed successfully\");}).catch(function(){console.log(\"Problem in removing Doc\");});};_this.updateDisconnection=function(){var myConnectionsRef=firebase.database().ref('users/'+_this.state.userDetails.id+'/connected');var lastOnlineRef=firebase.database().ref('users/'+_this.state.userDetails.id+'/lastOnline');myConnectionsRef.child('/'+_this.state.connectionKey).remove();lastOnlineRef.set(firebase.database.ServerValue.TIMESTAMP);};_this.getProfilePictures=function(){_this.myProfilePicturesRef.getDownloadURL().then(function(url){return _this.setState({profilePicture:url});}).catch(function(e){return console.log(e.name);});_this.usersRef.doc(_this.currUserUid).get().then(function(doc){return _this.setState({link_user:doc.data().link_user},function(){_this.cloudRef.child('profile_pictures/'+_this.state.link_user).getDownloadURL().then(function(url){return _this.setState({friendProfile:url});}).catch(function(e){return console.log(e.name);});});}).catch(function(e){return console.log(e.name);});};_this.changeProfilePictue=function(url){_this.setState({profilePicture:url});};_this.directVid=function(hosting){_this.setState({directVid:true,hostVid:hosting});};_this.hrefClick=function(e){var con=window.confirm(\"האם אתה בטוח שברצונך לעזוב את האתר?\");if(!con)e.preventDefault();};_this.routeToVideo=function(){if(_this.state.directVid)return/*#__PURE__*/React.createElement(Redirect,{push:true,to:\"/VideoPage\"});return null;};_this.getWallRouteStatus=function(){_this.setState({routeToWall:true});};_this.routeToWall=function(){if(_this.state.routeToWall){_this.setState({routeToWall:false});return/*#__PURE__*/React.createElement(Redirect,{push:true,to:\"/Wall\"});}return null;};_this.getMeetingRouteStatus=function(){_this.setState({routeToMeeting:true});};_this.routeToMeeting=function(){if(_this.state.routeToMeeting){_this.setState({routeToMeeting:false});return/*#__PURE__*/React.createElement(Redirect,{push:true,to:\"/Meeting\"});}return null;};_this.waitUntilPageIsLoaded=function(){if(_this.state.loadingUser||_this.state.loadingLinkedUser)return/*#__PURE__*/React.createElement(\"div\",{className:\"loader-element\"},/*#__PURE__*/React.createElement(\"h1\",null,\"\\u05D0\\u05E0\\u05D0 \\u05D4\\u05DE\\u05EA\\u05DF... \"),/*#__PURE__*/React.createElement(Loader,{color:\"#776078\",width:\"300px\",height:\"300px\",type:\"Bars\"}));else return/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{path:\"/VideoPage\"},/*#__PURE__*/React.createElement(VideoPage,{userName:_this.state.userDetails.fName,linkedName:_this.state.linkedUserDetails.fName,linkId:_this.state.userDetails.link_user,myLinkId:_this.state.linkedUserDetails.link_user,modifyVideoStream:_this.modifyVideoStream,directVid:_this.state.directVid,hostVid:_this.state.hostVid,room_id:_this.state.roomId,removeDocs:_this.removeDocs,modifyVideoNotAllowed:_this.modifyVideoNotAllowed})),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/Wall\"},/*#__PURE__*/React.createElement(\"div\",{className:\"app-page\"},/*#__PURE__*/React.createElement(Profile,{userDetails:_this.state.userDetails,profilePic:_this.state.profilePicture}),/*#__PURE__*/React.createElement(WallPost,{userName:_this.state.userDetails.fName+\" \"+_this.state.userDetails.lName,friendName:_this.state.linkedUserDetails.fName+\" \"+_this.state.linkedUserDetails.lName,myProfilePic:_this.state.profilePicture,friendProfilePic:_this.state.friendProfile}),/*#__PURE__*/React.createElement(Profile,{userDetails:_this.state.linkedUserDetails,profilePic:_this.state.friendProfile})),\" \",_this.routeToVideo()),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/Home\"},/*#__PURE__*/React.createElement(HomePage,{myDetails:_this.state.userDetails,linkedDetails:_this.state.linkedUserDetails,directVid:_this.directVid,newVideo:_this.state.newVideo,otherUserConnection:_this.state.otherUserConnection,otherUserLastOnline:_this.state.otherUserLastOnline,next_meeting:_this.state.next_meeting,getNextMeeting:_this.getNextMeeting,loadingNextMeeting:_this.state.loadingNextMeeting,routeToWall:_this.getWallRouteStatus,routeToMeeting:_this.getMeetingRouteStatus,myProfilePic:_this.state.profilePicture,friendProfilePic:_this.state.friendProfile,changeProfilePictue:_this.changeProfilePictue}),_this.routeToWall(),_this.routeToVideo(),_this.routeToMeeting()),\" \",/*#__PURE__*/React.createElement(Route,{path:\"/Meeting\"},/*#__PURE__*/React.createElement(Meeting,null),_this.routeToVideo()),\" \",/*#__PURE__*/React.createElement(Redirect,{push:true,to:\"/Home\"}));};_this.changePassword=function(){_this.setState({pwdRender:true});};_this.closeChangePassword=function(){_this.setState({pwdRender:false});};_this.renderPwd=function(){if(_this.state.pwdRender)return/*#__PURE__*/React.createElement(ChangePassword,{parentCallback:_this.closeChangePassword,email:_this.state.userDetails.email});else return null;};_this.state={userDetails:{fName:\"\",lName:\"\"},linkedUserDetails:{fName:\"\",lName:\"\"},isMounted:false,loadingUser:true,loadingLinkedUser:true,next_meeting:null,loadingNextMeeting:true,active:false,isOnVideo:false,notAllowed:false,roomId:\"\",newVideo:\"\",pageLoaded:false,directVid:false,hostVid:null,routeToWall:false,routeToMeeting:false,otherUserConnection:false,otherUserLastOnline:null,pwdRender:false,connectionKey:\"\",link_user:\"\",profilePicture:\"\",friendProfile:\"\",stopSnap:null,zoom:Math.min(window.innerHeight/620,window.innerWidth/1536)};_this.usersRef=firebase.firestore().collection('Users');_this.connectionRef=firebase.database().ref('.info/connected');_this.currUserUid=firebase.auth().currentUser.uid;_this.cloudRef=firebase.storage().ref();_this.myProfilePicturesRef=_this.cloudRef.child('profile_pictures/'+firebase.auth().currentUser.uid);return _this;}_createClass(App,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.state.stopSnap)this.state.stopSnap();}},{key:\"componentDidMount\",value:function componentDidMount(){var webSiteWidth=1280;var webScale=window.screen.width/webSiteWidth;document.querySelector('meta[name=\"viewport\"]').setAttribute('content','width='+webSiteWidth+', initial-scale='+webScale+'');window.addEventListener(\"resize\",this.resizeWin);this.getUserName();this.getProfilePictures();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProp,prevState){var _this2=this;if(this.state.userDetails.email!==prevState.userDetails.email){var mateDoc;if(typeof this.state.userDetails.link_user==='undefined'||this.state.userDetails.link_user===\"\"){alert(\"למשתמש זה אין חונך/חניך. אנא פנה למנהל המערכת עם הודעה זו.\");firebase.auth().signOut();}else{this.getLinkedUser();mateDoc=firebase.firestore().collection('Users').doc(this.state.userDetails.link_user);mateDoc.get().then(function(doc){if(!doc.exists||doc.data().link_user===\"\"){alert(\"למשתמש זה אין חונך/חניך. אנא פנה למנהל המערכת עם הודעה זו.\");firebase.auth().signOut();}else{_this2.setState({isMounted:true});_this2.updateConnection();var unsubscribe=_this2.usersRef.doc(_this2.currUserUid).collection('Rooms').onSnapshot(function(snapshot){//listen to a room creation\nsnapshot.docChanges().forEach(function(change){if(_this2.state.otherUserConnection&&change.type===\"added\"&&change.doc.data()&&!change.doc.data().answer){_this2.setState({newVideo:\"added\"});_this2.setState({roomId:change.doc.id},function(){var con=window.confirm(\"\".concat(_this2.state.linkedUserDetails.fName,\" \\u05D4\\u05D6\\u05DE\\u05D9\\u05DF \\u05D0\\u05D5\\u05EA\\u05DA \\u05DC\\u05E9\\u05D9\\u05D7\\u05EA \\u05D5\\u05D9\\u05D3\\u05D0\\u05D5. \\u05D4\\u05D0\\u05DD \\u05D0\\u05EA\\u05D4 \\u05DE\\u05E2\\u05D5\\u05E0\\u05D9\\u05D9\\u05DF \\u05DC\\u05D4\\u05E6\\u05D8\\u05E8\\u05E3?\"));if(con)_this2.directVid(false);});}else if(change.type===\"removed\")_this2.setState({roomId:\"\",newVideo:\"removed\"});});});_this2.setState({stopSnap:unsubscribe});}}).catch(function(e){return console.log(e.name);});}}}},{key:\"render\",value:function render(){var _this3=this;var activeTabStyle={fontWeight:\"bold\",backgroundColor:\"#4CAF50\"};return/*#__PURE__*/React.createElement(\"div\",{className:\"main-page-app\",style:{zoom:this.state.zoom}},/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(\"a\",{href:\"https://www.bigbrothers.org.il/\",onClick:function onClick(e){return _this3.hrefClick(e);}},/*#__PURE__*/React.createElement(\"img\",{src:logo,alt:\"\",className:\"MainLogo\"})),/*#__PURE__*/React.createElement(\"ul\",{className:\"nav\"},/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item \"},/*#__PURE__*/React.createElement(NavLink,{className:\"tab\",to:\"/Home\",activeStyle:activeTabStyle,onClick:function onClick(event){return _this3.checkIfVideo(event);}},\"\\u05D1\\u05D9\\u05EA\",\" \"),\" \"),\" \",/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item \"},/*#__PURE__*/React.createElement(NavLink,{className:\"tab\",to:\"/Wall\",activeStyle:activeTabStyle,onClick:function onClick(event){return _this3.checkIfVideo(event);}},\"\\u05E7\\u05D9\\u05E8\",\" \"),\" \"),\" \",/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item \"},/*#__PURE__*/React.createElement(NavLink,{className:\"tab\",to:\"/VideoPage\",activeStyle:activeTabStyle},\"\\u05E9\\u05D9\\u05D7\\u05EA \\u05D5\\u05D9\\u05D3\\u05D0\\u05D5\",\" \"),\" \"),\" \",/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(NavLink,{className:\"tab\",to:\"/Meeting\",activeStyle:activeTabStyle,onClick:function onClick(event){return _this3.checkIfVideo(event);}},\"\\u05E7\\u05D1\\u05D9\\u05E2\\u05EA \\u05E4\\u05D2\\u05D9\\u05E9\\u05D4\",\" \"),\" \"),\" \"),\" \",/*#__PURE__*/React.createElement(\"div\",{className:\"navbar-options\"},/*#__PURE__*/React.createElement(\"button\",{onClick:this.changePassword,className:\"btn btn-outline-info change-pwd-btn\"},/*#__PURE__*/React.createElement(\"h6\",null,\"\\u05E9\\u05D9\\u05E0\\u05D5\\u05D9 \\u05E1\\u05D9\\u05E1\\u05DE\\u05D0\")),/*#__PURE__*/React.createElement(\"h1\",{className:\"username-home\"},\"\\u05E9\\u05DC\\u05D5\\u05DD, \",this.state.userDetails.fName+\" \"+this.state.userDetails.lName)),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger sign-out-btn\",onClick:this.logout},\"\\u05D4\\u05EA\\u05E0\\u05EA\\u05E7\")),\" \",\" \",this.waitUntilPageIsLoaded()),\" \"),\" \",this.renderPwd());}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["C:/Users/ahmad/Downloads/BigBrotherBigSisterIsrael-master/BigBrotherBigSisterIsrael-master/src/mainPageComponents/App.jsx"],"names":["React","Component","Meeting","WallPost","Profile","HomePage","VideoPage","ChangePassword","firebase","Loader","logo","BrowserRouter","Router","Switch","Route","NavLink","Redirect","App","props","logout","logOutConfirm","window","confirm","state","isMounted","updateDisconnection","auth","signOut","then","console","log","catch","error","resizeWin","e","setState","zoom","Math","min","innerHeight","innerWidth","getUserName","currentUser","currUserUid","firestore","collection","doc","get","uDetail","exists","alert","userDetails","data","loadingUser","name","setLinkedUser","linkedUserDetails","loadingLinkedUser","getLinkedUser","docRef","usersRef","link_user","getNextMeeting","meetingRef","where","Date","now","orderBy","limit","querySnap","empty","next_meeting","docs","loadingNextMeeting","checkIfVideo","event","isOnVideo","con","directVid","hostVid","preventDefault","notAllowed","modifyVideoStream","localSt","remoteSt","modifyVideoNotAllowed","updateConnection","myConnectionsRef","database","ref","id","lastOnlineRef","friendConnectionsRef","friendOnlineRef","connectionRef","on","snap","val","push","onDisconnect","remove","removeDocs","connectionKey","key","set","ServerValue","TIMESTAMP","otherUserConnection","otherUserLastOnline","querySnapshot","forEach","subSnap","subDoc","delete","child","getProfilePictures","myProfilePicturesRef","getDownloadURL","url","profilePicture","cloudRef","friendProfile","changeProfilePictue","hosting","hrefClick","routeToVideo","getWallRouteStatus","routeToWall","getMeetingRouteStatus","routeToMeeting","waitUntilPageIsLoaded","fName","roomId","lName","newVideo","changePassword","pwdRender","closeChangePassword","renderPwd","email","active","pageLoaded","stopSnap","uid","storage","webSiteWidth","webScale","screen","width","document","querySelector","setAttribute","addEventListener","prevProp","prevState","mateDoc","unsubscribe","onSnapshot","snapshot","docChanges","change","type","answer","activeTabStyle","fontWeight","backgroundColor"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Meeting from \"../navBarComponents/meetingComponents/Meeting\";\r\nimport WallPost from \"../navBarComponents/wallComponents/wall/WallPost\";\r\nimport Profile from \"../navBarComponents/wallComponents/profile/Profile\";\r\nimport HomePage from \"../navBarComponents/homeComponents/HomePage\";\r\nimport VideoPage from \"../navBarComponents/videoComponents/main/VideoPage\";\r\nimport ChangePassword from \"./ChangePassword\"\r\nimport \"./App.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport firebase from \"../config/Firebase\"\r\nimport Loader from 'react-loader-spinner'\r\nimport logo from '../static_pictures/big_brothers_big_sisters.png'\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  NavLink,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\n\r\nclass App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      userDetails: {\r\n        fName: \"\",\r\n        lName: \"\"\r\n      },\r\n      linkedUserDetails: {\r\n        fName: \"\",\r\n        lName: \"\"\r\n      },\r\n      isMounted: false,\r\n      loadingUser: true,\r\n      loadingLinkedUser: true,\r\n      next_meeting: null,\r\n      loadingNextMeeting: true,\r\n      active: false,\r\n      isOnVideo: false,\r\n      notAllowed: false,\r\n      roomId: \"\",\r\n      newVideo: \"\",\r\n      pageLoaded: false,\r\n      directVid: false,\r\n      hostVid: null,\r\n      routeToWall: false,\r\n      routeToMeeting: false,\r\n      otherUserConnection: false,\r\n      otherUserLastOnline: null,\r\n      pwdRender: false,\r\n      connectionKey: \"\",\r\n      link_user: \"\",\r\n      profilePicture: \"\",\r\n      friendProfile: \"\",\r\n      stopSnap: null,\r\n      zoom: Math.min(window.innerHeight / 620, window.innerWidth / 1536)\r\n    };\r\n    this.usersRef = firebase.firestore().collection('Users');\r\n    this.connectionRef = firebase.database().ref('.info/connected');\r\n    this.currUserUid = firebase.auth().currentUser.uid;\r\n    this.cloudRef = firebase.storage().ref();\r\n    this.myProfilePicturesRef = this.cloudRef.child('profile_pictures/' + firebase.auth().currentUser.uid);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.state.stopSnap)\r\n      this.state.stopSnap();\r\n  }\r\n\r\n  logout = () => {\r\n    var logOutConfirm = window.confirm(\"האם אתה בטוח שברצונך להתנתק מהמערכת?\");\r\n    if (!logOutConfirm)\r\n      return;\r\n    if (this.state.isMounted)\r\n      this.updateDisconnection();\r\n    firebase.auth().signOut()\r\n      .then(() => {\r\n        console.log(\"Successful sign-out\")\r\n        // Sign-out successful.\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Sign-out error\")\r\n        // An error happened.\r\n      });\r\n  }\r\n\r\n  resizeWin = (e) => {\r\n    this.setState({\r\n      zoom: Math.min(window.innerHeight / 620, window.innerWidth / 1536)\r\n    });\r\n  };\r\n\r\n  getUserName = () => {\r\n    if (firebase.auth().currentUser === null)\r\n      return;\r\n    var currUserUid = firebase.firestore().collection('Users').doc(this.currUserUid);\r\n    currUserUid\r\n      .get()\r\n      .then((uDetail) => {\r\n        if (!uDetail.exists) {\r\n          alert(\"משתמש זה לא קיים יותר במערכת. אנא פנה למנהל.\");\r\n          firebase.auth().signOut();\r\n        }\r\n        else {\r\n          this.setState({ userDetails: uDetail.data() },\r\n            () => this.setState({ loadingUser: false }))\r\n        }\r\n      })\r\n      .catch((e) => console.log(e.name));\r\n  }\r\n\r\n  setLinkedUser = (doc) => {\r\n    this.setState({ linkedUserDetails: doc.data() });\r\n    this.setState({ loadingLinkedUser: false });\r\n  }\r\n\r\n  getLinkedUser = () => {\r\n    var docRef = this.usersRef.doc(this.state.userDetails.link_user);\r\n    docRef\r\n      .get()\r\n      .then((doc) => this.setLinkedUser(doc))\r\n      .catch((e) => console.log(e.name))\r\n  }\r\n\r\n  getNextMeeting = () => {\r\n    var meetingRef = this.usersRef.doc(this.currUserUid).collection('Meetings')\r\n    meetingRef\r\n      .where('timeStamp', \">=\", ((Date.now() / 1000)) - 900)\r\n      .orderBy(\"timeStamp\", \"asc\")\r\n      .limit(1)\r\n      .get()\r\n      .then(querySnap => {\r\n        if (!querySnap.empty)\r\n          this.setState({ next_meeting: querySnap.docs[0].data() });\r\n        else\r\n          this.setState({ next_meeting: null })\r\n      })\r\n      .then(() => this.setState({ loadingNextMeeting: false }))\r\n      .catch((e) => console.log(e.name))\r\n  }\r\n\r\n  checkIfVideo = (event) => {\r\n    if (this.state.isOnVideo) {\r\n      var con = window.confirm(\"האם אתה בטוח שברצונך לסיים את שיחת הוידאו?\");\r\n      if (con)\r\n        this.setState({ directVid: false, hostVid: null, isOnVideo: false });\r\n      else\r\n        event.preventDefault();\r\n    }\r\n    else if (this.state.notAllowed)\r\n      this.setState({ directVid: false, hostVid: null, isOnVideo: false });\r\n  }\r\n\r\n  modifyVideoStream = (localSt, remoteSt) => {\r\n    this.setState({ isOnVideo: true });\r\n  }\r\n\r\n  modifyVideoNotAllowed = () => {\r\n    this.setState({ notAllowed: true });\r\n  }\r\n\r\n  updateConnection = () => {\r\n    var myConnectionsRef = firebase.database().ref('users/' + this.state.userDetails.id + '/connected');\r\n    var lastOnlineRef = firebase.database().ref('users/' + this.state.userDetails.id + '/lastOnline');\r\n    var friendConnectionsRef = firebase.database().ref('users/' + this.state.linkedUserDetails.id + '/connected');\r\n    var friendOnlineRef = firebase.database().ref('users/' + this.state.linkedUserDetails.id + '/lastOnline');\r\n    this.connectionRef.on('value', (snap) => {\r\n      if (snap.val() === true) {\r\n        var con = myConnectionsRef.push();\r\n        con.onDisconnect().remove(this.removeDocs);\r\n        this.setState({ connectionKey: con.key });\r\n        con.set(true);\r\n        lastOnlineRef.onDisconnect().set(firebase.database.ServerValue.TIMESTAMP);\r\n      }\r\n    });\r\n    friendConnectionsRef.on('value', (snap) => {\r\n      if (snap.val() !== null)\r\n        this.setState({ otherUserConnection: true })\r\n      else\r\n        this.setState({ otherUserConnection: false })\r\n    });\r\n    friendOnlineRef.on('value', (snap) => {\r\n      this.setState({ otherUserLastOnline: snap.val() })\r\n    });\r\n  }\r\n\r\n  removeDocs = () => {\r\n    var ref = this.usersRef\r\n      .doc(this.state.userDetails.link_user)\r\n      .collection('Rooms');\r\n    ref\r\n      .get()\r\n      .then(querySnapshot => {\r\n        querySnapshot.forEach(doc => {\r\n          doc.ref.collection('first_participant')\r\n            .get()\r\n            .then(subSnap => {\r\n              subSnap.forEach(subDoc =>\r\n                subDoc.ref.delete())\r\n              doc.ref.collection('second_participant')\r\n                .get()\r\n                .then(subSnap =>\r\n                  subSnap.forEach(subDoc =>\r\n                    subDoc.ref.delete()))\r\n            })\r\n            .then(() => {\r\n              doc.ref.delete();\r\n            })\r\n        })\r\n      }).then(() => {\r\n        console.log(\"Docs has removed successfully\")\r\n      })\r\n      .catch(() => {\r\n        console.log(\"Problem in removing Doc\")\r\n      })\r\n  }\r\n\r\n  updateDisconnection = () => {\r\n    var myConnectionsRef = firebase.database().ref('users/' + this.state.userDetails.id + '/connected');\r\n    var lastOnlineRef = firebase.database().ref('users/' + this.state.userDetails.id + '/lastOnline');\r\n    myConnectionsRef.child('/' + this.state.connectionKey).remove();\r\n    lastOnlineRef.set(firebase.database.ServerValue.TIMESTAMP);\r\n  }\r\n\r\n  getProfilePictures = () => {\r\n    this.myProfilePicturesRef.getDownloadURL()\r\n      .then(url => this.setState({ profilePicture: url }))\r\n      .catch((e) => console.log(e.name));\r\n    this.usersRef.doc(this.currUserUid).get()\r\n      .then(doc => this.setState({ link_user: doc.data().link_user },\r\n        () => {\r\n\r\n          this.cloudRef.child('profile_pictures/' + this.state.link_user)\r\n            .getDownloadURL()\r\n            .then((url) => this.setState({ friendProfile: url }))\r\n            .catch((e) => console.log(e.name));\r\n        }))\r\n      .catch((e) => console.log(e.name));\r\n  }\r\n\r\n  changeProfilePictue = (url) => {\r\n    this.setState({ profilePicture: url });\r\n  }\r\n\r\n  componentDidMount() {\r\n    var webSiteWidth = 1280;\r\n    var webScale = window.screen.width / webSiteWidth\r\n    document.querySelector('meta[name=\"viewport\"]').setAttribute('content', 'width=' + webSiteWidth + ', initial-scale=' + webScale + '');\r\n\r\n    window.addEventListener(\"resize\", this.resizeWin);\r\n    this.getUserName();\r\n    this.getProfilePictures();\r\n  }\r\n\r\n  componentDidUpdate(prevProp, prevState) {\r\n    if (this.state.userDetails.email !== prevState.userDetails.email) {\r\n      var mateDoc;\r\n      if (typeof (this.state.userDetails.link_user) === 'undefined' || this.state.userDetails.link_user === \"\") {\r\n        alert(\"למשתמש זה אין חונך/חניך. אנא פנה למנהל המערכת עם הודעה זו.\");\r\n        firebase.auth().signOut();\r\n      }\r\n      else {\r\n        this.getLinkedUser();\r\n        mateDoc = firebase.firestore().collection('Users').doc(this.state.userDetails.link_user);\r\n        mateDoc.get()\r\n          .then((doc) => {\r\n            if (!doc.exists || doc.data().link_user === \"\") {\r\n              alert(\"למשתמש זה אין חונך/חניך. אנא פנה למנהל המערכת עם הודעה זו.\");\r\n              firebase.auth().signOut();\r\n            }\r\n            else {\r\n              this.setState({ isMounted: true });\r\n              this.updateConnection();\r\n              var unsubscribe = this.usersRef.doc(this.currUserUid).collection('Rooms').onSnapshot(snapshot => { //listen to a room creation\r\n                snapshot.docChanges().forEach(change => {\r\n                  if (this.state.otherUserConnection && change.type === \"added\" && change.doc.data() && !change.doc.data().answer) {\r\n                    this.setState({ newVideo: \"added\" });\r\n                    this.setState({ roomId: change.doc.id }, () => {\r\n                      var con = window.confirm(`${this.state.linkedUserDetails.fName} הזמין אותך לשיחת וידאו. האם אתה מעוניין להצטרף?`)\r\n                      if (con)\r\n                        this.directVid(false);\r\n                    });\r\n                  }\r\n                  else if (change.type === \"removed\")\r\n                    this.setState({ roomId: \"\", newVideo: \"removed\" });\r\n                });\r\n              });\r\n              this.setState({ stopSnap: unsubscribe });\r\n            }\r\n          })\r\n          .catch((e) => console.log(e.name));\r\n      }\r\n    }\r\n  }\r\n\r\n  directVid = (hosting) => {\r\n    this.setState({ directVid: true, hostVid: hosting })\r\n  }\r\n\r\n  hrefClick = (e) => {\r\n    var con = window.confirm(\"האם אתה בטוח שברצונך לעזוב את האתר?\");\r\n    if (!con)\r\n      e.preventDefault();\r\n  }\r\n\r\n  routeToVideo = () => {\r\n    if (this.state.directVid)\r\n      return (<Redirect push to=\"/VideoPage\" ></Redirect>);\r\n    return null;\r\n  }\r\n\r\n  getWallRouteStatus = () => {\r\n    this.setState({ routeToWall: true })\r\n  }\r\n\r\n  routeToWall = () => {\r\n    if (this.state.routeToWall) {\r\n      this.setState({ routeToWall: false })\r\n      return (<Redirect push to=\"/Wall\" ></Redirect>);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getMeetingRouteStatus = () => {\r\n    this.setState({ routeToMeeting: true })\r\n  }\r\n\r\n  routeToMeeting = () => {\r\n    if (this.state.routeToMeeting) {\r\n      this.setState({ routeToMeeting: false })\r\n      return (<Redirect push to=\"/Meeting\" ></Redirect>);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  waitUntilPageIsLoaded = () => {\r\n    if (this.state.loadingUser || this.state.loadingLinkedUser)\r\n      return (\r\n        <div className=\"loader-element\">\r\n          <h1>אנא המתן... </h1>\r\n          <Loader color=\"#776078\" width=\"300px\" height=\"300px\" type=\"Bars\" />\r\n        </div>\r\n      );\r\n    else\r\n      return (\r\n        <Switch>\r\n          <Route path=\"/VideoPage\">\r\n            <VideoPage\r\n              userName={this.state.userDetails.fName}\r\n              linkedName={this.state.linkedUserDetails.fName}\r\n              linkId={this.state.userDetails.link_user}\r\n              myLinkId={this.state.linkedUserDetails.link_user}\r\n              modifyVideoStream={this.modifyVideoStream}\r\n              directVid={this.state.directVid}\r\n              hostVid={this.state.hostVid}\r\n              room_id={this.state.roomId}\r\n              removeDocs={this.removeDocs}\r\n              modifyVideoNotAllowed={this.modifyVideoNotAllowed}\r\n            />\r\n\r\n          </Route>{\" \"}\r\n          <Route path=\"/Wall\">\r\n            <div className=\"app-page\">\r\n              <Profile\r\n                userDetails={this.state.userDetails}\r\n                profilePic={this.state.profilePicture}\r\n              />\r\n              <WallPost\r\n                userName={this.state.userDetails.fName + \" \" + this.state.userDetails.lName}\r\n                friendName={this.state.linkedUserDetails.fName + \" \" + this.state.linkedUserDetails.lName}\r\n                myProfilePic={this.state.profilePicture}\r\n                friendProfilePic={this.state.friendProfile}\r\n              />\r\n              <Profile\r\n                userDetails={this.state.linkedUserDetails}\r\n                profilePic={this.state.friendProfile}\r\n              />\r\n            </div>{\" \"}\r\n            {this.routeToVideo()}\r\n          </Route>{\" \"}\r\n          <Route path=\"/Home\">\r\n            <HomePage\r\n              myDetails={this.state.userDetails}\r\n              linkedDetails={this.state.linkedUserDetails}\r\n              directVid={this.directVid}\r\n              newVideo={this.state.newVideo}\r\n              otherUserConnection={this.state.otherUserConnection}\r\n              otherUserLastOnline={this.state.otherUserLastOnline}\r\n              next_meeting={this.state.next_meeting}\r\n              getNextMeeting={this.getNextMeeting}\r\n              loadingNextMeeting={this.state.loadingNextMeeting}\r\n              routeToWall={this.getWallRouteStatus}\r\n              routeToMeeting={this.getMeetingRouteStatus}\r\n              myProfilePic={this.state.profilePicture}\r\n              friendProfilePic={this.state.friendProfile}\r\n              changeProfilePictue={this.changeProfilePictue}\r\n            />\r\n            {this.routeToWall()}\r\n            {this.routeToVideo()}\r\n            {this.routeToMeeting()}\r\n          </Route>{\" \"}\r\n          <Route path=\"/Meeting\">\r\n            <Meeting />\r\n            {this.routeToVideo()}\r\n          </Route>{\" \"}\r\n          <Redirect push to=\"/Home\" ></Redirect>\r\n        </Switch>\r\n      );\r\n  }\r\n\r\n  changePassword = () => {\r\n    this.setState({ pwdRender: true })\r\n  }\r\n\r\n  closeChangePassword = () => {\r\n    this.setState({ pwdRender: false })\r\n  }\r\n\r\n  renderPwd = () => {\r\n    if (this.state.pwdRender)\r\n      return (<ChangePassword parentCallback={this.closeChangePassword} email={this.state.userDetails.email} />);\r\n    else\r\n      return null;\r\n  }\r\n\r\n  render() {\r\n\r\n    const activeTabStyle = {\r\n      fontWeight: \"bold\",\r\n      backgroundColor: \"#4CAF50\",\r\n    };\r\n\r\n    return (\r\n      <div className=\"main-page-app\" style={{ zoom: this.state.zoom }}>\r\n        <Router>\r\n          <div>\r\n            <nav>\r\n              <a\r\n                href=\"https://www.bigbrothers.org.il/\"\r\n                onClick={(e) => this.hrefClick(e)}>\r\n                <img\r\n                  src={logo}\r\n                  alt=\"\"\r\n                  className=\"MainLogo\"\r\n                />\r\n              </a>\r\n              <ul className=\"nav\">\r\n                <li className=\"nav-item \">\r\n                  <NavLink\r\n                    className=\"tab\"\r\n                    to=\"/Home\"\r\n                    activeStyle={activeTabStyle}\r\n                    onClick={(event) => this.checkIfVideo(event)}\r\n                  >\r\n                    בית{\" \"}\r\n                  </NavLink>{\" \"}\r\n                </li>{\" \"}\r\n                <li className=\"nav-item \">\r\n                  <NavLink\r\n                    className=\"tab\"\r\n                    to=\"/Wall\"\r\n                    activeStyle={activeTabStyle}\r\n                    onClick={(event) => this.checkIfVideo(event)}\r\n                  >\r\n                    קיר{\" \"}\r\n                  </NavLink>{\" \"}\r\n                </li>{\" \"}\r\n                <li className=\"nav-item \">\r\n                  <NavLink\r\n                    className=\"tab\"\r\n                    to=\"/VideoPage\"\r\n                    activeStyle={activeTabStyle}\r\n                  >\r\n                    שיחת וידאו{\" \"}\r\n                  </NavLink>{\" \"}\r\n                </li>{\" \"}\r\n                <li className=\"nav-item\">\r\n                  <NavLink\r\n                    className=\"tab\"\r\n                    to=\"/Meeting\"\r\n                    activeStyle={activeTabStyle}\r\n                    onClick={(event) => this.checkIfVideo(event)}\r\n                  >\r\n                    קביעת פגישה{\" \"}\r\n                  </NavLink>{\" \"}\r\n                </li>{\" \"}\r\n              </ul>{\" \"}\r\n              <div className=\"navbar-options\">\r\n                <button onClick={this.changePassword} className=\"btn btn-outline-info change-pwd-btn\"><h6>שינוי סיסמא</h6></button>\r\n                <h1 className=\"username-home\">שלום, {this.state.userDetails.fName + \" \" + this.state.userDetails.lName}</h1>\r\n              </div>\r\n              <button className=\"btn btn-danger sign-out-btn\" onClick={this.logout}>התנתק</button>\r\n            </nav>{\" \"}\r\n            {/* A <Switch> looks through its children <Route>s and\r\n                                                        renders the first one that matches the current URL. */}{\" \"}\r\n            {this.waitUntilPageIsLoaded()}\r\n          </div>{\" \"}\r\n        </Router>{\" \"}\r\n        {this.renderPwd()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}