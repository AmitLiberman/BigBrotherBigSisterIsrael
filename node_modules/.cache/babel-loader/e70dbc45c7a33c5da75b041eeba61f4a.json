{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\src\\\\appIndex\\\\AppIndex.jsx\";\nimport React, { Component } from \"react\";\nimport App from \"../mainPageComponents/App\";\nimport LoginForm from \"../loginComponents/LoginForm\";\nimport AdminPage from \"../adminComponents/main/AdminPage\";\nimport firebase from \"../config/Firebase\";\n\nclass AppIndex extends Component {\n  constructor(props) {\n    super(props);\n\n    this.determineIfAdmin = type => {\n      if (type === \"אדמין\" || this.state.isAdmin) {\n        this.setState({ ...this.state,\n          isAdmin: true\n        });\n      } else if (type === \"רכז\" || this.state.isRacaz) {\n        this.setState({ ...this.state,\n          isRacaz: true\n        });\n      }\n\n      this.setState({ ...this.state,\n        isAdmin: false,\n        isRacaz: false\n      });\n    };\n\n    this.exitAdmin = () => {\n      this.setState({\n        isLoggedIn: false,\n        isAdmin: false\n      });\n    };\n\n    this.onAuthChanged = user => {\n      if (user) {\n        // User is signed in.\n        var userType;\n        var userUid = user.uid;\n        this.usersRef.doc(userUid).get().then(doc => {\n          if (doc.exists) userType = doc.data().type;else userType = \"\";\n        }).then(() => {\n          this.determineIfAdmin(userType);\n        }).then(() => this.setState({\n          isLoggedIn: true\n        })).catch(e => console.log(e.name));\n      } else // No user is signed in.\n        this.setState({\n          isLoggedIn: false\n        });\n    };\n\n    this.state = {\n      isLoggedIn: false,\n      isAdmin: false,\n      isRacaz: false\n    };\n    this.usersRef = firebase.firestore().collection('Users');\n  }\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => this.onAuthChanged(user));\n  }\n\n  renderContent() {\n    if (this.state.isLoggedIn && !this.state.isAdmin) return /*#__PURE__*/React.createElement(App, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    });\n    if (this.state.isLoggedIn && this.state.isAdmin) return /*#__PURE__*/React.createElement(AdminPage, {\n      exitAdmin: this.exitAdmin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }\n    });else return /*#__PURE__*/React.createElement(LoginForm, {\n      determineIfAdmin: this.determineIfAdmin,\n      isLoggedIn: this.state.isLoggedIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }\n    });\n  }\n\n  render() {\n    return this.renderContent();\n  }\n\n}\n\nexport default AppIndex;","map":{"version":3,"sources":["C:/Users/ahmad/Downloads/BigBrotherBigSisterIsrael-master/BigBrotherBigSisterIsrael-master/src/appIndex/AppIndex.jsx"],"names":["React","Component","App","LoginForm","AdminPage","firebase","AppIndex","constructor","props","determineIfAdmin","type","state","isAdmin","setState","isRacaz","exitAdmin","isLoggedIn","onAuthChanged","user","userType","userUid","uid","usersRef","doc","get","then","exists","data","catch","e","console","log","name","firestore","collection","componentDidMount","auth","onAuthStateChanged","renderContent","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport App from \"../mainPageComponents/App\";\r\nimport LoginForm from \"../loginComponents/LoginForm\";\r\nimport AdminPage from \"../adminComponents/main/AdminPage\";\r\nimport firebase from \"../config/Firebase\"\r\n\r\nclass AppIndex extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoggedIn: false,\r\n            isAdmin: false,\r\n            isRacaz: false\r\n        };\r\n        this.usersRef = firebase.firestore().collection('Users');\r\n    }\r\n\r\n    determineIfAdmin = (type) => {\r\n        if (type === \"אדמין\" || this.state.isAdmin){\r\n            this.setState({...this.state, isAdmin: true });\r\n        }\r\n        else if (type === \"רכז\" || this.state.isRacaz){\r\n            this.setState({...this.state, isRacaz: true});\r\n        }\r\n            this.setState({...this.state, isAdmin: false, isRacaz: false });\r\n    }\r\n\r\n    exitAdmin = () => {\r\n        this.setState({ isLoggedIn: false, isAdmin: false })\r\n    }\r\n\r\n    onAuthChanged = (user) => {\r\n        if (user) {\r\n            // User is signed in.\r\n            var userType;\r\n            var userUid = user.uid;\r\n            this.usersRef.doc(userUid).get()\r\n                .then(doc => {\r\n                    if (doc.exists)\r\n                        userType = doc.data().type;\r\n                    else\r\n                        userType = \"\";\r\n                })\r\n                .then(() => {\r\n                    this.determineIfAdmin(userType);\r\n                })\r\n                .then(() => this.setState({ isLoggedIn: true }))\r\n                .catch((e) => console.log(e.name));\r\n        }\r\n        else\r\n            // No user is signed in.\r\n            this.setState({ isLoggedIn: false });\r\n    }\r\n\r\n    componentDidMount() {\r\n        firebase.auth().onAuthStateChanged((user) => this.onAuthChanged(user));\r\n    }\r\n\r\n    renderContent() {\r\n        if (this.state.isLoggedIn && !this.state.isAdmin)\r\n            return (<App />)\r\n        if (this.state.isLoggedIn && this.state.isAdmin)\r\n            return (<AdminPage exitAdmin={this.exitAdmin} />)\r\n        else\r\n            return (<LoginForm determineIfAdmin={this.determineIfAdmin} isLoggedIn={this.state.isLoggedIn} />)\r\n    }\r\n\r\n    render() {\r\n        return (this.renderContent());\r\n    }\r\n}\r\n\r\nexport default AppIndex;\r\n"]},"metadata":{},"sourceType":"module"}