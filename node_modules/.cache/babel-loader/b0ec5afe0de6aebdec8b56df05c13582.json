{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ahmad\\\\Documents\\\\GitHub\\\\BigBrotherBigSisterIsrael\\\\src\\\\appIndex\\\\AppIndex.jsx\";\nimport React, { Component } from \"react\";\nimport App from \"../mainPageComponents/App\";\nimport LoginForm from \"../loginComponents/LoginForm\";\nimport AdminPage from \"../adminComponents/main/AdminPage\";\nimport RacazPage from '../rakazComponents/RakazPage';\nimport InstructorPage from \"../InstructorComponents/InstructorPage\";\nimport firebase from \"../config/Firebase\";\n\nclass AppIndex extends Component {\n  constructor(props) {\n    super(props);\n\n    this.determineIfAdmin = type => {\n      if (type === \"אדמין\" || this.state.isAdmin) this.setState({\n        isAdmin: true\n      });else if (type === \"רכז\" || this.state.isRacaz) {\n        this.setState({ ...this.state,\n          isRacaz: true\n        });\n      } else if (type === \"מדריך\" || this.state.isRacaz) {\n        this.setState({ ...this.state,\n          isInstructor: true\n        });\n      } else this.setState({ ...this.state,\n        isAdmin: false,\n        isRacaz: false,\n        isInstructor: false\n      });\n    };\n\n    this.exitAdmin = () => {\n      this.setState({\n        isLoggedIn: false,\n        isAdmin: false\n      });\n    };\n\n    this.exitRacaz = () => {\n      this.setState({\n        isLoggedIn: false,\n        isRacaz: false\n      });\n    };\n\n    this.exitInstructor = () => {\n      this.setState({\n        isLoggedIn: false,\n        isInstructor: false\n      });\n    };\n\n    this.onAuthChanged = user => {\n      if (user) {\n        // User is signed in.\n        var userType;\n        var userUid = user.uid;\n        this.usersRef.doc(userUid).get().then(doc => {\n          if (doc.exists) userType = doc.data().type;else userType = \"\";\n        }).then(() => {\n          this.determineIfAdmin(userType);\n        }).then(() => this.setState({\n          isLoggedIn: true\n        })).catch(e => console.log(e.name));\n      } else // No user is signed in.\n        this.setState({\n          isLoggedIn: false\n        });\n    };\n\n    this.state = {\n      isLoggedIn: false,\n      isAdmin: false,\n      isRacaz: false,\n      isInstructor: false\n    };\n    this.usersRef = firebase.firestore().collection('Users');\n  }\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => this.onAuthChanged(user));\n  }\n\n  renderContent() {\n    if (this.state.isLoggedIn && !this.state.isAdmin && !this.state.isRacaz && !this.state.isInstructor) return /*#__PURE__*/React.createElement(App, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }\n    });\n    if (this.state.isLoggedIn && this.state.isAdmin && !this.state.isRacaz && !this.state.isInstructor) return /*#__PURE__*/React.createElement(AdminPage, {\n      exitAdmin: this.exitAdmin,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    });\n    if (this.state.isLoggedIn && !this.state.isAdmin && this.state.isRacaz && !this.state.isInstructor) return /*#__PURE__*/React.createElement(RacazPage, {\n      exitRacaz: this.exitRacaz,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    });\n    if (this.state.isLoggedIn && !this.state.isAdmin && !this.state.isRacaz && this.state.isInstructor) return /*#__PURE__*/React.createElement(InstructorPage, {\n      exitInstructor: this.exitInstructor,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }\n    });else return /*#__PURE__*/React.createElement(LoginForm, {\n      determineIfAdmin: this.determineIfAdmin,\n      isLoggedIn: this.state.isLoggedIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    });\n  }\n\n  render() {\n    return this.renderContent();\n  }\n\n}\n\nexport default AppIndex;","map":{"version":3,"sources":["C:/Users/ahmad/Documents/GitHub/BigBrotherBigSisterIsrael/src/appIndex/AppIndex.jsx"],"names":["React","Component","App","LoginForm","AdminPage","RacazPage","InstructorPage","firebase","AppIndex","constructor","props","determineIfAdmin","type","state","isAdmin","setState","isRacaz","isInstructor","exitAdmin","isLoggedIn","exitRacaz","exitInstructor","onAuthChanged","user","userType","userUid","uid","usersRef","doc","get","then","exists","data","catch","e","console","log","name","firestore","collection","componentDidMount","auth","onAuthStateChanged","renderContent","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport App from \"../mainPageComponents/App\";\r\nimport LoginForm from \"../loginComponents/LoginForm\";\r\nimport AdminPage from \"../adminComponents/main/AdminPage\";\r\nimport RacazPage from '../rakazComponents/RakazPage'\r\nimport InstructorPage from \"../InstructorComponents/InstructorPage\";\r\nimport firebase from \"../config/Firebase\"\r\n\r\nclass AppIndex extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoggedIn: false,\r\n            isAdmin: false,\r\n            isRacaz: false,\r\n            isInstructor : false\r\n        };\r\n        this.usersRef = firebase.firestore().collection('Users');\r\n    }\r\n\r\n    determineIfAdmin = (type) => {\r\n        if (type === \"אדמין\" || this.state.isAdmin)\r\n            this.setState({ isAdmin: true });\r\n\r\n        else if (type === \"רכז\" || this.state.isRacaz){\r\n            this.setState({...this.state, isRacaz: true});\r\n        }\r\n        else if (type === \"מדריך\" || this.state.isRacaz){\r\n            this.setState({...this.state,  isInstructor: true});\r\n        }\r\n        else\r\n            this.setState({...this.state, isAdmin: false, isRacaz: false ,  isInstructor: false });\r\n    }\r\n\r\n    exitAdmin = () => {\r\n        this.setState({ isLoggedIn: false, isAdmin: false })\r\n    }\r\n\r\n    exitRacaz = () => {\r\n        this.setState({ isLoggedIn: false, isRacaz: false })\r\n    }\r\n\r\n    exitInstructor = () => {\r\n        this.setState({ isLoggedIn: false, isInstructor: false })\r\n    }\r\n\r\n    onAuthChanged = (user) => {\r\n        if (user) {\r\n            // User is signed in.\r\n            var userType;\r\n            var userUid = user.uid;\r\n            this.usersRef.doc(userUid).get()\r\n                .then(doc => {\r\n                    if (doc.exists)\r\n                        userType = doc.data().type;\r\n                    else\r\n                        userType = \"\";\r\n                })\r\n                .then(() => {\r\n                    this.determineIfAdmin(userType);\r\n                })\r\n                .then(() => this.setState({ isLoggedIn: true }))\r\n                .catch((e) => console.log(e.name));\r\n        }\r\n        else\r\n            // No user is signed in.\r\n            this.setState({ isLoggedIn: false });\r\n    }\r\n\r\n    componentDidMount() {\r\n        firebase.auth().onAuthStateChanged((user) => this.onAuthChanged(user));\r\n    }\r\n\r\n    renderContent() {\r\n        if (this.state.isLoggedIn && !this.state.isAdmin && !this.state.isRacaz && !this.state.isInstructor)\r\n            return (<App />)\r\n        if (this.state.isLoggedIn && this.state.isAdmin && !this.state.isRacaz && !this.state.isInstructor)\r\n            return (<AdminPage exitAdmin={this.exitAdmin} />)\r\n        if (this.state.isLoggedIn && !this.state.isAdmin && this.state.isRacaz && !this.state.isInstructor)\r\n            return (<RacazPage exitRacaz={this.exitRacaz} />)\r\n        if (this.state.isLoggedIn && !this.state.isAdmin && !this.state.isRacaz && this.state.isInstructor)\r\n            return (<InstructorPage exitInstructor={this.exitInstructor} />)\r\n        else\r\n            return (<LoginForm determineIfAdmin={this.determineIfAdmin} isLoggedIn={this.state.isLoggedIn} />)\r\n    }\r\n\r\n    render() {\r\n        return (this.renderContent());\r\n    }\r\n}\r\n\r\nexport default AppIndex;\r\n"]},"metadata":{},"sourceType":"module"}