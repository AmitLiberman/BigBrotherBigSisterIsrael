{"ast":null,"code":"var _jsxFileName = \"/Users/wadie/BigBrotherBigSisterIsrael/src/adminComponents/partial/UsersTable.jsx\";\nimport React, { Component } from \"react\";\nimport Loader from 'react-loader-spinner';\nimport \"./UsersTable.css\";\nimport firebase from \"../../config/Firebase\";\nimport NoLinkedUsers from \"./NoLinkedUsers\";\n\nclass UsersTable extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderLinked = (index, dataType) => {\n      if (typeof this.state.linkedUserArr[index] !== 'undefined' && this.state.linkedUserArr[index] !== null) {\n        if (dataType === \"name\") return /*#__PURE__*/React.createElement(\"td\", {\n          className: \"align-middle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 21\n          }\n        }, this.state.linkedUserArr[index].fName + \" \" + this.state.linkedUserArr[index].lName);else if (dataType === \"id\") return /*#__PURE__*/React.createElement(\"td\", {\n          className: \"align-middle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 21\n          }\n        }, this.state.linkedUserArr[index].id);else if (dataType === \"email\") return /*#__PURE__*/React.createElement(\"td\", {\n          className: \"align-middle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }\n        }, this.state.linkedUserArr[index].email);else return /*#__PURE__*/React.createElement(\"td\", {\n          className: \"align-middle\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }\n        }, this.state.linkedUserArr[index].phone);\n      } else return null;\n    };\n\n    this.renderTableLine = () => {\n      return this.state.usersArr.map((data, index) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: \"row\" + index,\n        className: \"h5 table-cols\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }, data.fName + \" \" + data.lName), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }\n      }, data.id), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }, data.email), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 17\n        }\n      }, data.phone), this.renderLinked(index, \"name\"), this.renderLinked(index, \"id\"), this.renderLinked(index, \"email\"), this.renderLinked(index, \"phone\")));\n    };\n\n    this.renderNoLink = () => {\n      return this.state.noLinkedUsers.map((data, index) => /*#__PURE__*/React.createElement(\"tr\", {\n        key: \"row\" + index,\n        className: \"h4 table-cols\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }\n      }, data.name), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      }, data.role), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }, data.id), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }\n      }, data.email), /*#__PURE__*/React.createElement(\"td\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 17\n        }\n      }, data.phone)));\n    };\n\n    this.closeNoLink = () => {\n      this.setState({\n        noLink: false\n      });\n    };\n\n    this.showNoLinkedUsers = () => {\n      this.setState({\n        noLink: true\n      });\n    };\n\n    this.noLinkAppearance = () => {\n      if (this.state.noLink) return /*#__PURE__*/React.createElement(NoLinkedUsers, {\n        parentCallback: this.closeNoLink,\n        renderNoLink: this.renderNoLink,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 21\n        }\n      });\n      return null;\n    };\n\n    this.renderTable = () => {\n      if (typeof this.state.linkedUserArr[0] === 'undefined') return /*#__PURE__*/React.createElement(Loader, {\n        className: \"user-table-indicator\",\n        type: \"Bars\",\n        height: \"400px\",\n        width: \"400px\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 21\n        }\n      });else return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"table-div\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table table-striped table-dark w-75 table-responsive users-table\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        colSpan: \"8\",\n        className: \"h1 table-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 33\n        }\n      }, \"\\u05D8\\u05D1\\u05DC\\u05EA \\u05D7\\u05D5\\u05E0\\u05DA / \\u05D7\\u05E0\\u05D9\\u05DA\")), /*#__PURE__*/React.createElement(\"tr\", {\n        className: \"h2 table-cols\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 33\n        }\n      }, \"\\u05E9\\u05DD \\u05D4\\u05D7\\u05D5\\u05E0\\u05DA\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 33\n        }\n      }, \"\\u05EA\\\"\\u05D6\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 33\n        }\n      }, \"\\u05D0\\u05D9\\u05DE\\u05D9\\u05D9\\u05DC\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 33\n        }\n      }, \"\\u05D8\\u05DC\\u05E4\\u05D5\\u05DF\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 33\n        }\n      }, \"\\u05E9\\u05DD \\u05D4\\u05D7\\u05E0\\u05D9\\u05DA\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 33\n        }\n      }, \"\\u05EA\\\"\\u05D6\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 33\n        }\n      }, \"\\u05D0\\u05D9\\u05DE\\u05D9\\u05D9\\u05DC\"), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"align-middle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 33\n        }\n      }, \"\\u05D8\\u05DC\\u05E4\\u05D5\\u05DF\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 25\n        }\n      }, this.renderTableLine())), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-success show-no-link-btn\",\n        onClick: this.showNoLinkedUsers,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }\n      }, \"\\u05D4\\u05E6\\u05D2 \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\\u05D9\\u05DD \\u05DC\\u05DC\\u05D0 \\u05D7\\u05D5\\u05E0\\u05DA/\\u05D7\\u05E0\\u05D9\\u05DA\"), this.noLinkAppearance());\n    };\n\n    this.state = {\n      usersArr: [],\n      linkedUserArr: [],\n      noLinkedUsers: [],\n      noLink: false\n    };\n    this.usersRef = firebase.firestore().collection('Users');\n  }\n\n  componentDidMount() {\n    var linkedUserId;\n    this.usersRef.where('type', \"==\", \"חונך\").orderBy('fName', 'asc').orderBy('lName', 'asc').get().then(queryShot => {\n      queryShot.forEach(doc => {\n        linkedUserId = doc.data().link_user;\n\n        if (typeof linkedUserId !== 'undefined' && linkedUserId !== \"\") {\n          this.setState({\n            usersArr: [...this.state.usersArr, doc.data()]\n          });\n          this.usersRef.doc(linkedUserId).get().then(linkedDoc => this.setState({\n            linkedUserArr: [...this.state.linkedUserArr, linkedDoc.data()]\n          }));\n        }\n      });\n    }).catch(e => console.log(e.name));\n    this.usersRef.orderBy('type', 'desc').orderBy('fName', 'asc').orderBy('lName', 'asc').get().then(queryShot => {\n      queryShot.forEach(doc => {\n        linkedUserId = doc.data().link_user;\n\n        if ((typeof doc.data().link_user === 'undefined' || doc.data().link_user === \"\") && (doc.data().type === \"חונך\" || doc.data().type === \"חניך\")) {\n          var newUser = {\n            name: doc.data().fName + \" \" + doc.data().lName,\n            role: doc.data().type,\n            id: doc.data().id,\n            email: doc.data().email,\n            phone: doc.data().phone\n          };\n          this.setState({\n            noLinkedUsers: [...this.state.noLinkedUsers, newUser]\n          });\n        }\n      });\n    }).catch(e => console.log(e.name));\n  }\n\n  render() {\n    return this.renderTable();\n  }\n\n}\n\nexport default UsersTable;","map":{"version":3,"sources":["/Users/wadie/BigBrotherBigSisterIsrael/src/adminComponents/partial/UsersTable.jsx"],"names":["React","Component","Loader","firebase","NoLinkedUsers","UsersTable","constructor","props","renderLinked","index","dataType","state","linkedUserArr","fName","lName","id","email","phone","renderTableLine","usersArr","map","data","renderNoLink","noLinkedUsers","name","role","closeNoLink","setState","noLink","showNoLinkedUsers","noLinkAppearance","renderTable","usersRef","firestore","collection","componentDidMount","linkedUserId","where","orderBy","get","then","queryShot","forEach","doc","link_user","linkedDoc","catch","e","console","log","type","newUser","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Loader from 'react-loader-spinner'\r\nimport \"./UsersTable.css\";\r\nimport firebase from \"../../config/Firebase\"\r\nimport NoLinkedUsers from \"./NoLinkedUsers\";\r\n\r\nclass UsersTable extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            usersArr: [],\r\n            linkedUserArr: [],\r\n            noLinkedUsers: [],\r\n            noLink: false\r\n        }\r\n        this.usersRef = firebase.firestore().collection('Users');\r\n    }\r\n\r\n    componentDidMount() {\r\n        var linkedUserId;\r\n        this.usersRef\r\n            .where('type', \"==\", \"חונך\")\r\n            .orderBy('fName', 'asc')\r\n            .orderBy('lName', 'asc')\r\n            .get()\r\n            .then(queryShot => {\r\n                queryShot.forEach(\r\n                    (doc) => {\r\n                        linkedUserId = doc.data().link_user;\r\n                        if (typeof (linkedUserId) !== 'undefined' && linkedUserId !== \"\") {\r\n                            this.setState({ usersArr: [...this.state.usersArr, doc.data()] })\r\n                            this.usersRef.doc(linkedUserId).get()\r\n                                .then(linkedDoc => this.setState({ linkedUserArr: [...this.state.linkedUserArr, linkedDoc.data()] }))\r\n                        }\r\n                    }\r\n                )\r\n            })\r\n            .catch((e) => console.log(e.name));\r\n        this.usersRef\r\n            .orderBy('type', 'desc')\r\n            .orderBy('fName', 'asc')\r\n            .orderBy('lName', 'asc')\r\n            .get()\r\n            .then(queryShot => {\r\n                queryShot.forEach(\r\n                    (doc) => {\r\n                        linkedUserId = doc.data().link_user;\r\n                        if ((typeof (doc.data().link_user) === 'undefined' || doc.data().link_user === \"\") &&\r\n                            (doc.data().type === \"חונך\" || doc.data().type === \"חניך\")) {\r\n                            var newUser = {\r\n                                name: doc.data().fName + \" \" + doc.data().lName,\r\n                                role: doc.data().type,\r\n                                id: doc.data().id,\r\n                                email: doc.data().email,\r\n                                phone: doc.data().phone\r\n                            };\r\n                            this.setState({ noLinkedUsers: [...this.state.noLinkedUsers, newUser] })\r\n                        }\r\n                    })\r\n            })\r\n            .catch((e) => console.log(e.name));\r\n    }\r\n\r\n    renderLinked = (index, dataType) => {\r\n        if (typeof (this.state.linkedUserArr[index]) !== 'undefined' && this.state.linkedUserArr[index] !== null) {\r\n            if (dataType === \"name\")\r\n                return (\r\n                    <td className=\"align-middle\">{this.state.linkedUserArr[index].fName + \" \" + this.state.linkedUserArr[index].lName}</td>\r\n                );\r\n            else if (dataType === \"id\")\r\n                return (\r\n                    <td className=\"align-middle\">{this.state.linkedUserArr[index].id}</td>\r\n                );\r\n            else if (dataType === \"email\")\r\n                return (\r\n                    <td className=\"align-middle\">{this.state.linkedUserArr[index].email}</td>\r\n                );\r\n            else\r\n                return (\r\n                    <td className=\"align-middle\">{this.state.linkedUserArr[index].phone}</td>\r\n                );\r\n\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n\r\n    renderTableLine = () => {\r\n\r\n        return (this.state.usersArr.map((data, index) =>\r\n            <tr key={\"row\" + index} className=\"h5 table-cols\">\r\n                <td className=\"align-middle\">{data.fName + \" \" + data.lName}</td>\r\n                <td className=\"align-middle\">{data.id}</td>\r\n                <td className=\"align-middle\">{data.email}</td>\r\n                <td className=\"align-middle\">{data.phone}</td>\r\n                {this.renderLinked(index, \"name\")}\r\n                {this.renderLinked(index, \"id\")}\r\n                {this.renderLinked(index, \"email\")}\r\n                {this.renderLinked(index, \"phone\")}\r\n            </tr >\r\n        ));\r\n    }\r\n\r\n    renderNoLink = () => {\r\n        return (this.state.noLinkedUsers.map((data, index) =>\r\n            <tr key={\"row\" + index} className=\"h4 table-cols\">\r\n                <td className=\"align-middle\">{data.name}</td>\r\n                <td className=\"align-middle\">{data.role}</td>\r\n                <td className=\"align-middle\">{data.id}</td>\r\n                <td className=\"align-middle\">{data.email}</td>\r\n                <td className=\"align-middle\">{data.phone}</td>\r\n\r\n            </tr >\r\n        ));\r\n    }\r\n\r\n    closeNoLink = () => {\r\n        this.setState({ noLink: false })\r\n    }\r\n\r\n    showNoLinkedUsers = () => {\r\n        this.setState({ noLink: true })\r\n    }\r\n\r\n    noLinkAppearance = () => {\r\n        if (this.state.noLink)\r\n            return (<NoLinkedUsers parentCallback={this.closeNoLink} renderNoLink={this.renderNoLink} />)\r\n        return null;\r\n    }\r\n\r\n    renderTable = () => {\r\n        if (typeof (this.state.linkedUserArr[0]) === 'undefined')\r\n            return (<Loader className=\"user-table-indicator\" type=\"Bars\" height=\"400px\" width=\"400px\"></Loader>);\r\n        else\r\n            return (\r\n                <div className=\"table-div\">\r\n                    <table className=\"table table-striped table-dark w-75 table-responsive users-table\" >\r\n                        <thead>\r\n                            <tr><th colSpan=\"8\" className=\"h1 table-title\">טבלת חונך / חניך</th></tr>\r\n                            <tr className=\"h2 table-cols\">\r\n                                <th className=\"align-middle\">שם החונך</th>\r\n                                <th className=\"align-middle\">ת\"ז</th>\r\n                                <th className=\"align-middle\">אימייל</th>\r\n                                <th className=\"align-middle\">טלפון</th>\r\n                                <th className=\"align-middle\">שם החניך</th>\r\n                                <th className=\"align-middle\">ת\"ז</th>\r\n                                <th className=\"align-middle\">אימייל</th>\r\n                                <th className=\"align-middle\">טלפון</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {this.renderTableLine()}\r\n                        </tbody>\r\n                    </table>\r\n                    <button className=\"btn btn-success show-no-link-btn\" onClick={this.showNoLinkedUsers}>הצג משתמשים ללא חונך/חניך</button>\r\n                    {this.noLinkAppearance()}\r\n                </div>\r\n            );\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            this.renderTable()\r\n        );\r\n    }\r\n}\r\n\r\nexport default UsersTable;\r\n"]},"metadata":{},"sourceType":"module"}