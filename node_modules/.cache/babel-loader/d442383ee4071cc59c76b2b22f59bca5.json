{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ahmad\\\\Documents\\\\GitHub\\\\BigBrotherBigSisterIsrael\\\\src\\\\rakazComponents\\\\Meetings.jsx\";\nimport React, { Component } from \"react\";\nimport \"./Meetings.css\";\nimport firebase from \"../config/Firebase\";\nimport MeetingList from \"../navBarComponents/meetingComponents/MeetingList\";\nimport $ from \"jquery\";\n\nclass Meetings extends Component {\n  constructor(props) {\n    super(props);\n\n    this.searchFilterOnchane = event => {\n      this.state({\n        search: event.target.value\n      });\n    };\n\n    this.getMeetings = () => {\n      var newMeetingObj;\n      var futureMeetings = this.myMeetingsRef.where('timeStamp', \">=\", Date.now() / 1000 - 7200).orderBy(\"timeStamp\", \"desc\");\n      futureMeetings.get().then(querySnap => {\n        this.setState({\n          lastMeetingVisible: querySnap.docs[querySnap.docs.length - 1],\n          futureLength: querySnap.docs.length\n        }, () => {\n          if (querySnap.empty) this.setState({\n            lastMeetingVisible: {\n              timeStamp: Date.now() / 1000 - 7200\n            }\n          });else if (typeof this.state.lastMeetingVisible === 'undefined') this.setState({\n            loadedAll: true\n          });\n        });\n        querySnap.forEach(doc => {\n          newMeetingObj = {};\n          Object.assign(newMeetingObj, doc.data());\n          newMeetingObj.doc_id = doc.id;\n          this.setState({\n            meetings: [...this.state.meetings, newMeetingObj]\n          });\n        });\n      }).then(() => this.setState({\n        loadingFromFirebase: false\n      })).catch(e => console.log(e.name));\n    };\n\n    this.updateTableAfterDelete = meetingsArr => {\n      this.setState({\n        meetings: [...meetingsArr]\n      });\n    };\n\n    this.loadPrev = () => {\n      if (typeof this.state.lastMeetingVisible === 'undefined') return;\n      var startFrom;\n      if (typeof this.state.lastMeetingVisible.timeStamp === 'undefined') startFrom = this.state.lastMeetingVisible.data().timeStamp;else startFrom = this.state.lastMeetingVisible.timeStamp;\n      this.setState({\n        loadingPastMeetings: true\n      });\n      var newMeetingObj;\n      this.myMeetingsRef.orderBy(\"timeStamp\", \"desc\").startAfter(startFrom).limit(5).get().then(querySnap => {\n        if (querySnap.docs.length < 5) this.setState({\n          loadedAll: true\n        });\n        if (querySnap.docs.length === 0) return;\n        this.setState({\n          lastMeetingVisible: querySnap.docs[querySnap.docs.length - 1]\n        });\n        querySnap.forEach(doc => {\n          newMeetingObj = {};\n          Object.assign(newMeetingObj, doc.data());\n          newMeetingObj.doc_id = doc.id;\n          this.setState({\n            meetings: [...this.state.meetings, newMeetingObj]\n          });\n        });\n      }).then(() => this.setState({\n        loadingPastMeetings: false\n      })).catch(e => console.log(e.name));\n    };\n\n    this.getTable = () => {\n      return /*#__PURE__*/React.createElement(MeetingList, {\n        className: \"meeting-list\",\n        meetingsArr: this.state.meetings,\n        loading: this.state.loadingFromFirebase,\n        myUser: this.myMeetingsRef,\n        linkUser: this.mateMeetingsRef,\n        updateRef: this.updateTableAfterDelete,\n        loadPrev: this.loadPrev,\n        loadedAll: this.state.loadedAll,\n        futureLength: this.state.futureLength,\n        loadingPastMeetings: this.state.loadingPastMeetings,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 16\n        }\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      var isSure;\n\n      if (!this.state.scheduled) {\n        isSure = window.confirm(\"האם ברצונך לקבוע פגישה:\\nבתאריך: \" + this.state.date + \"\\nבשעה: \" + this.state.time + \"\\nבמיקום: \" + this.state.place);\n      } else isSure = window.confirm(\"האם ברצונך לקבוע 13 פגישות קבועות לשלושת החודשים הקרובים:\\nהחל מתאריך: \" + this.state.date + \"\\nבשעה: \" + this.state.time + \"\\nבמיקום: \" + this.state.place);\n\n      if (isSure) {\n        var amount_of_meetings = this.state.scheduled ? 13 : 1;\n        var dates = [],\n            newMeetings = [],\n            newMeetingObj = [];\n\n        for (let i = 0; i < amount_of_meetings; i++) {\n          var nextDate = new Date(Date.parse(this.state.date) + 7 * 24 * 60 * 60 * 1000 * i);\n          dates.push(nextDate.getFullYear() + \"-\" + (nextDate.getMonth() + 1) + \"-\" + nextDate.getDate());\n          var time_stamp = Date.parse(dates[i] + \" \" + this.state.time) / 1000;\n          let selected_list = \"\";\n          var checked_list = $('.people_check:checked');\n          checked_list.forEach(function (item) {\n            if (selected_list !== \"\") selected_list += \",\";\n            selected_list += $(this).parent().attr('person_id');\n          });\n          newMeetings.push({\n            date: dates[i],\n            send_list: selected_list,\n            timeStamp: time_stamp,\n            place: this.state.place,\n            description: this.state.description\n          });\n          newMeetingObj.push({});\n          this.myMeetingsRef.add(newMeetings[i]).then(docRef => {\n            this.newDocId = docRef.id;\n            this.mateMeetingsRef.doc(docRef.id).set(newMeetings[i]);\n          }).then(() => {\n            if (!this.state.scheduled && this.state.date !== \"\") {\n              alert(\"נקבעה פגישה בתאריך: \" + this.state.date + \"\\nבשעה: \" + this.state.time + \"\\nבמיקום: \" + this.state.place);\n            } else if (i === 0) alert(\"נקבעו 13 פגישות קבועות לשלושת החודשים הקרובים.\");\n\n            Object.assign(newMeetingObj[i], newMeetings[i]);\n            newMeetingObj[i].doc_id = this.newDocId;\n            const d = [].concat(this.state.meetings).concat(newMeetingObj[i]).sort((a, b) => this.sortFunc(a, b));\n            this.setState({\n              meetings: [...d],\n              date: \"\",\n              time: \"\",\n              place: \"\",\n              description: \"\",\n              scheduled: false\n            });\n          }).catch(e => console.log(e.name));\n        }\n      }\n    };\n\n    this.sortFunc = (a, b) => {\n      if (a.timeStamp > b.timeStamp) return -1;\n      if (a.timeStamp < b.timeStamp) return 1;\n      return 0;\n    };\n\n    this.state = {\n      meetings: [],\n      date: \"\",\n      time: \"\",\n      place: \"\",\n      search: \"\",\n      description: \"\",\n      loadingFromFirebase: true,\n      lastMeetingVisible: null,\n      loadedAll: false,\n      futureLength: 0,\n      loadingPastMeetings: false,\n      scheduled: false\n    };\n    this.newDocId = \"\";\n    this.people = [];\n    this.myMeetingsRef = firebase.firestore().collection('Users').doc(firebase.auth().currentUser.uid).collection('Meetings');\n    firebase.firestore().collection('Users').doc(firebase.auth().currentUser.uid).get().then(doc => {\n      this.linkUser = doc.data().link_user;\n      this.mateMeetingsRef = firebase.firestore().collection('Users').doc(this.linkUser).collection('Meetings');\n    }).catch(e => console.log(e.name));\n    firebase.firestore().collection('Users').get().then(querySnapshot => {\n      querySnapshot.docs.map(doc => {\n        this.people.push({\n          id: doc.data().id,\n          name: doc.data().fName + \" \" + doc.data().lName,\n          type: doc.data().type\n        });\n        return null;\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.getMeetings();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-background\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"meeting-form\",\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"meeting-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"u\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 55\n      }\n    }, \"\\u05E7\\u05D1\\u05D9\\u05E2\\u05EA \\u05E4\\u05D2\\u05D9\\u05E9\\u05D4\")), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"fLabels\",\n      style: {\n        float: \"right\"\n      },\n      htmlFor: \"date\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 25\n      }\n    }, \"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA \\u05D4\\u05E4\\u05D2\\u05D9\\u05E9\\u05D4\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: e => this.setState({\n        date: e.target.value\n      }),\n      type: \"date\",\n      className: \"form-control\",\n      id: \"date\",\n      placeholder: \"\\u05EA\\u05D0\\u05E8\\u05D9\\u05DA \\u05D4\\u05E4\\u05D2\\u05D9\\u05E9\\u05D4\",\n      value: this.state.date,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"fLabels\",\n      style: {\n        float: \"right\"\n      },\n      htmlFor: \"hour\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 25\n      }\n    }, \"\\u05E9\\u05E2\\u05EA \\u05D4\\u05E4\\u05D2\\u05D9\\u05E9\\u05D4\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: e => this.setState({\n        time: e.target.value\n      }),\n      type: \"time\",\n      className: \"form-control\",\n      id: \"hour\",\n      placeholder: \"\\u05E9\\u05E2\\u05EA \\u05D4\\u05E4\\u05D2\\u05D9\\u05E9\\u05D4\",\n      value: this.state.time,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"fLabels\",\n      style: {\n        float: \"right\"\n      },\n      htmlFor: \"place\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 25\n      }\n    }, \"\\u05DE\\u05D9\\u05E7\\u05D5\\u05DD \\u05D4\\u05E4\\u05D2\\u05D9\\u05E9\\u05D4\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: e => this.setState({\n        place: e.target.value\n      }),\n      type: \"text\",\n      className: \"form-control\",\n      id: \"place\",\n      placeholder: \"\\u05DE\\u05D9\\u05E7\\u05D5\\u05DD \\u05D4\\u05E4\\u05D2\\u05D9\\u05E9\\u05D4\",\n      value: this.state.place,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"fLabels\",\n      style: {\n        float: \"right\"\n      },\n      htmlFor: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 25\n      }\n    }, \"\\u05EA\\u05D9\\u05D0\\u05D5\\u05E8\"), /*#__PURE__*/React.createElement(\"input\", {\n      onChange: e => this.setState({\n        description: e.target.value\n      }),\n      type: \"text\",\n      className: \"form-control\",\n      id: \"description\",\n      value: this.state.description,\n      placeholder: \"\\u05EA\\u05D9\\u05D0\\u05D5\\u05E8\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"fLabels\",\n      style: {\n        float: \"right\"\n      },\n      htmlFor: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"table\", {\n      class: \"table table-bordered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h6\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 28\n      }\n    }, \"\\u05DE\\u05E9\\u05EA\\u05EA\\u05E4\\u05D9\\u05DD\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter ID\",\n      value: this.props.inputvalue,\n      onChange: this.props.personFilterOnChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container__table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 33\n      }\n    }, \"\\u05EA.\\u05D6\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 33\n      }\n    }, \"\\u05E9\\u05DD\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 33\n      }\n    }, \"\\u05E1\\u05D5\\u05D2 \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 33\n      }\n    }, \"\\u05D1\\u05D7\\u05E8\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 29\n      }\n    }, this.people.map((person, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 37\n      }\n    }, person.id), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 57\n      }\n    }, person.name), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 79\n      }\n    }, person.type), /*#__PURE__*/React.createElement(\"td\", {\n      person_id: person.email,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      class: \"people_check\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 66\n      }\n    })))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"form-check-input w-25\",\n      id: \"scheduledMeeting\",\n      checked: this.state.scheduled,\n      onChange: e => this.setState({\n        scheduled: !this.state.scheduled\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      className: \"form-check-label check-meeting-lbl w-75\",\n      style: {\n        float: \"right\"\n      },\n      htmlFor: \"description\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 25\n      }\n    }, \"\\u05E4\\u05D2\\u05D9\\u05E9\\u05D5\\u05EA \\u05E7\\u05D1\\u05D5\\u05E2\\u05D5\\u05EA - \\u05DC\\u05E9\\u05DC\\u05D5\\u05E9\\u05EA \\u05D4\\u05D7\\u05D5\\u05D3\\u05E9\\u05D9\\u05DD \\u05D4\\u05E7\\u05E8\\u05D5\\u05D1\\u05D9\\u05DD\")), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-success setup-meeting-btn\",\n      style: {\n        float: \"right\",\n        marginRight: \"700px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 21\n      }\n    }, \"\\u05E7\\u05D1\\u05E2 \\u05E4\\u05D2\\u05D9\\u05E9\\u05D4!\", \" \")), this.getTable());\n  }\n\n}\n\nexport default Meetings;","map":{"version":3,"sources":["C:/Users/ahmad/Documents/GitHub/BigBrotherBigSisterIsrael/src/rakazComponents/Meetings.jsx"],"names":["React","Component","firebase","MeetingList","$","Meetings","constructor","props","searchFilterOnchane","event","state","search","target","value","getMeetings","newMeetingObj","futureMeetings","myMeetingsRef","where","Date","now","orderBy","get","then","querySnap","setState","lastMeetingVisible","docs","length","futureLength","empty","timeStamp","loadedAll","forEach","doc","Object","assign","data","doc_id","id","meetings","loadingFromFirebase","catch","e","console","log","name","updateTableAfterDelete","meetingsArr","loadPrev","startFrom","loadingPastMeetings","startAfter","limit","getTable","mateMeetingsRef","handleSubmit","preventDefault","isSure","scheduled","window","confirm","date","time","place","amount_of_meetings","dates","newMeetings","i","nextDate","parse","push","getFullYear","getMonth","getDate","time_stamp","selected_list","checked_list","item","parent","attr","send_list","description","add","docRef","newDocId","set","alert","d","concat","sort","a","b","sortFunc","people","firestore","collection","auth","currentUser","uid","linkUser","link_user","querySnapshot","map","fName","lName","type","componentDidMount","render","float","inputvalue","personFilterOnChange","person","index","email","marginRight"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAO,gBAAP;AAGA,OAAOC,QAAP,MAAqB,oBAArB;AACA,OAAOC,WAAP,MAAwB,mDAAxB;AACA,OAAOC,CAAP,MAAc,QAAd;;AACA,MAAMC,QAAN,SAAuBJ,SAAvB,CAAiC;AAE7BK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAqCvBC,mBArCuB,GAqCAC,KAAD,IAAS;AAC3B,WAAKC,KAAL,CAAW;AACPC,QAAAA,MAAM,EAAGF,KAAK,CAACG,MAAN,CAAaC;AADf,OAAX;AAKH,KA3CsB;;AAAA,SA6CnBC,WA7CmB,GA6CL,MAAM;AAChB,UAAIC,aAAJ;AACA,UAAIC,cAAc,GAAG,KAAKC,aAAL,CAChBC,KADgB,CACV,WADU,EACG,IADH,EACWC,IAAI,CAACC,GAAL,KAAa,IAAd,GAAsB,IADhC,EAEhBC,OAFgB,CAER,WAFQ,EAEK,MAFL,CAArB;AAIAL,MAAAA,cAAc,CACTM,GADL,GAEKC,IAFL,CAEWC,SAAD,IAAe;AACjB,aAAKC,QAAL,CAAc;AAAEC,UAAAA,kBAAkB,EAAEF,SAAS,CAACG,IAAV,CAAeH,SAAS,CAACG,IAAV,CAAeC,MAAf,GAAwB,CAAvC,CAAtB;AAAiEC,UAAAA,YAAY,EAAEL,SAAS,CAACG,IAAV,CAAeC;AAA9F,SAAd,EAAsH,MAAM;AACxH,cAAIJ,SAAS,CAACM,KAAd,EACI,KAAKL,QAAL,CAAc;AAAEC,YAAAA,kBAAkB,EAAE;AAAEK,cAAAA,SAAS,EAAIZ,IAAI,CAACC,GAAL,KAAa,IAAd,GAAsB;AAApC;AAAtB,WAAd,EADJ,KAEK,IAAI,OAAQ,KAAKV,KAAL,CAAWgB,kBAAnB,KAA2C,WAA/C,EACD,KAAKD,QAAL,CAAc;AAAEO,YAAAA,SAAS,EAAE;AAAb,WAAd;AACP,SALD;AAMAR,QAAAA,SAAS,CAACS,OAAV,CAAmBC,GAAD,IAAS;AACvBnB,UAAAA,aAAa,GAAG,EAAhB;AACAoB,UAAAA,MAAM,CAACC,MAAP,CAAcrB,aAAd,EAA6BmB,GAAG,CAACG,IAAJ,EAA7B;AACAtB,UAAAA,aAAa,CAACuB,MAAd,GAAuBJ,GAAG,CAACK,EAA3B;AACA,eAAKd,QAAL,CAAc;AAAEe,YAAAA,QAAQ,EAAE,CAAC,GAAG,KAAK9B,KAAL,CAAW8B,QAAf,EAAyBzB,aAAzB;AAAZ,WAAd;AACH,SALD;AAMH,OAfL,EAgBKQ,IAhBL,CAgBU,MAAM,KAAKE,QAAL,CAAc;AAAEgB,QAAAA,mBAAmB,EAAE;AAAvB,OAAd,CAhBhB,EAiBKC,KAjBL,CAiBYC,CAAD,IAAOC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,IAAd,CAjBlB;AAkBH,KArEkB;;AAAA,SA2EnBC,sBA3EmB,GA2EOC,WAAD,IAAiB;AACtC,WAAKvB,QAAL,CAAc;AAAEe,QAAAA,QAAQ,EAAE,CAAC,GAAGQ,WAAJ;AAAZ,OAAd;AACH,KA7EkB;;AAAA,SA+EnBC,QA/EmB,GA+ER,MAAM;AACb,UAAI,OAAQ,KAAKvC,KAAL,CAAWgB,kBAAnB,KAA2C,WAA/C,EACI;AACJ,UAAIwB,SAAJ;AACA,UAAI,OAAQ,KAAKxC,KAAL,CAAWgB,kBAAX,CAA8BK,SAAtC,KAAqD,WAAzD,EACImB,SAAS,GAAG,KAAKxC,KAAL,CAAWgB,kBAAX,CAA8BW,IAA9B,GAAqCN,SAAjD,CADJ,KAGImB,SAAS,GAAG,KAAKxC,KAAL,CAAWgB,kBAAX,CAA8BK,SAA1C;AACJ,WAAKN,QAAL,CAAc;AAAE0B,QAAAA,mBAAmB,EAAE;AAAvB,OAAd;AACA,UAAIpC,aAAJ;AACA,WAAKE,aAAL,CACKI,OADL,CACa,WADb,EAC0B,MAD1B,EAEK+B,UAFL,CAEgBF,SAFhB,EAGKG,KAHL,CAGW,CAHX,EAIK/B,GAJL,GAKKC,IALL,CAKWC,SAAD,IAAe;AACjB,YAAIA,SAAS,CAACG,IAAV,CAAeC,MAAf,GAAwB,CAA5B,EACI,KAAKH,QAAL,CAAc;AAAEO,UAAAA,SAAS,EAAE;AAAb,SAAd;AACJ,YAAIR,SAAS,CAACG,IAAV,CAAeC,MAAf,KAA0B,CAA9B,EACI;AACJ,aAAKH,QAAL,CAAc;AAAEC,UAAAA,kBAAkB,EAAEF,SAAS,CAACG,IAAV,CAAeH,SAAS,CAACG,IAAV,CAAeC,MAAf,GAAwB,CAAvC;AAAtB,SAAd;AACAJ,QAAAA,SAAS,CAACS,OAAV,CAAmBC,GAAD,IAAS;AACvBnB,UAAAA,aAAa,GAAG,EAAhB;AACAoB,UAAAA,MAAM,CAACC,MAAP,CAAcrB,aAAd,EAA6BmB,GAAG,CAACG,IAAJ,EAA7B;AACAtB,UAAAA,aAAa,CAACuB,MAAd,GAAuBJ,GAAG,CAACK,EAA3B;AACA,eAAKd,QAAL,CAAc;AAAEe,YAAAA,QAAQ,EAAE,CAAC,GAAG,KAAK9B,KAAL,CAAW8B,QAAf,EAAyBzB,aAAzB;AAAZ,WAAd;AACH,SALD;AAMH,OAjBL,EAkBKQ,IAlBL,CAkBU,MAAM,KAAKE,QAAL,CAAc;AAAE0B,QAAAA,mBAAmB,EAAE;AAAvB,OAAd,CAlBhB,EAmBKT,KAnBL,CAmBYC,CAAD,IAAOC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,IAAd,CAnBlB;AAoBH,KA7GkB;;AAAA,SA+GnBQ,QA/GmB,GA+GR,MAAM;AACb,0BAAO,oBAAC,WAAD;AACH,QAAA,SAAS,EAAC,cADP;AAEH,QAAA,WAAW,EAAE,KAAK5C,KAAL,CAAW8B,QAFrB;AAGH,QAAA,OAAO,EAAE,KAAK9B,KAAL,CAAW+B,mBAHjB;AAIH,QAAA,MAAM,EAAE,KAAKxB,aAJV;AAKH,QAAA,QAAQ,EAAE,KAAKsC,eALZ;AAMH,QAAA,SAAS,EAAE,KAAKR,sBANb;AAOH,QAAA,QAAQ,EAAE,KAAKE,QAPZ;AAQH,QAAA,SAAS,EAAE,KAAKvC,KAAL,CAAWsB,SARnB;AASH,QAAA,YAAY,EAAE,KAAKtB,KAAL,CAAWmB,YATtB;AAUH,QAAA,mBAAmB,EAAE,KAAKnB,KAAL,CAAWyC,mBAV7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AAYH,KA5HkB;;AAAA,SA8HnBK,YA9HmB,GA8HH/C,KAAD,IAAW;AACtBA,MAAAA,KAAK,CAACgD,cAAN;AACA,UAAIC,MAAJ;;AACA,UAAI,CAAC,KAAKhD,KAAL,CAAWiD,SAAhB,EAA2B;AACvBD,QAAAA,MAAM,GAAGE,MAAM,CAACC,OAAP,CACL,sCACA,KAAKnD,KAAL,CAAWoD,IADX,GAEA,UAFA,GAGA,KAAKpD,KAAL,CAAWqD,IAHX,GAIA,YAJA,GAKA,KAAKrD,KAAL,CAAWsD,KANN,CAAT;AAQH,OATD,MAWIN,MAAM,GAAGE,MAAM,CAACC,OAAP,CACL,4EACA,KAAKnD,KAAL,CAAWoD,IADX,GAEA,UAFA,GAGA,KAAKpD,KAAL,CAAWqD,IAHX,GAIA,YAJA,GAKA,KAAKrD,KAAL,CAAWsD,KANN,CAAT;;AAQJ,UAAIN,MAAJ,EAAY;AACR,YAAIO,kBAAkB,GAAG,KAAKvD,KAAL,CAAWiD,SAAX,GAAuB,EAAvB,GAA4B,CAArD;AACA,YAAIO,KAAK,GAAG,EAAZ;AAAA,YAAgBC,WAAW,GAAG,EAA9B;AAAA,YAAkCpD,aAAa,GAAG,EAAlD;;AACA,aAAK,IAAIqD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,kBAApB,EAAwCG,CAAC,EAAzC,EAA6C;AACzC,cAAIC,QAAQ,GAAI,IAAIlD,IAAJ,CAASA,IAAI,CAACmD,KAAL,CAAW,KAAK5D,KAAL,CAAWoD,IAAtB,IAA+B,IAAI,EAAJ,GAAS,EAAT,GAAc,EAAd,GAAmB,IAApB,GAA4BM,CAAnE,CAAhB;AACAF,UAAAA,KAAK,CAACK,IAAN,CAAWF,QAAQ,CAACG,WAAT,KAAyB,GAAzB,IAAgCH,QAAQ,CAACI,QAAT,KAAsB,CAAtD,IAA2D,GAA3D,GAAiEJ,QAAQ,CAACK,OAAT,EAA5E;AACA,cAAIC,UAAU,GAAMxD,IAAI,CAACmD,KAAL,CAAWJ,KAAK,CAACE,CAAD,CAAL,GAAW,GAAX,GAAiB,KAAK1D,KAAL,CAAWqD,IAAvC,CAAD,GAAiD,IAApE;AACA,cAAIa,aAAa,GAAG,EAApB;AACA,cAAIC,YAAY,GAAGzE,CAAC,CAAC,uBAAD,CAApB;AACCyE,UAAAA,YAAY,CAAC5C,OAAb,CAAqB,UAAS6C,IAAT,EAAc;AAChC,gBAAGF,aAAa,KAAG,EAAnB,EAAsBA,aAAa,IAAI,GAAjB;AACtBA,YAAAA,aAAa,IAAIxE,CAAC,CAAC,IAAD,CAAD,CAAQ2E,MAAR,GAAiBC,IAAjB,CAAsB,WAAtB,CAAjB;AACH,WAHA;AAIDb,UAAAA,WAAW,CAACI,IAAZ,CAAiB;AACbT,YAAAA,IAAI,EAAEI,KAAK,CAACE,CAAD,CADE;AAEba,YAAAA,SAAS,EAAEL,aAFE;AAGb7C,YAAAA,SAAS,EAAE4C,UAHE;AAIbX,YAAAA,KAAK,EAAE,KAAKtD,KAAL,CAAWsD,KAJL;AAKbkB,YAAAA,WAAW,EAAE,KAAKxE,KAAL,CAAWwE;AALX,WAAjB;AAOAnE,UAAAA,aAAa,CAACwD,IAAd,CAAmB,EAAnB;AACA,eAAKtD,aAAL,CAAmBkE,GAAnB,CAAuBhB,WAAW,CAACC,CAAD,CAAlC,EACK7C,IADL,CACW6D,MAAD,IAAY;AACd,iBAAKC,QAAL,GAAgBD,MAAM,CAAC7C,EAAvB;AACA,iBAAKgB,eAAL,CAAqBrB,GAArB,CAAyBkD,MAAM,CAAC7C,EAAhC,EAAoC+C,GAApC,CAAwCnB,WAAW,CAACC,CAAD,CAAnD;AACH,WAJL,EAKK7C,IALL,CAKU,MAAM;AACR,gBAAI,CAAC,KAAKb,KAAL,CAAWiD,SAAZ,IAAyB,KAAKjD,KAAL,CAAWoD,IAAX,KAAoB,EAAjD,EAAqD;AACjDyB,cAAAA,KAAK,CACD,yBACA,KAAK7E,KAAL,CAAWoD,IADX,GAEA,UAFA,GAGA,KAAKpD,KAAL,CAAWqD,IAHX,GAIA,YAJA,GAKA,KAAKrD,KAAL,CAAWsD,KANV,CAAL;AAQH,aATD,MAUK,IAAII,CAAC,KAAK,CAAV,EACDmB,KAAK,CACD,gDADC,CAAL;;AAGJpD,YAAAA,MAAM,CAACC,MAAP,CAAcrB,aAAa,CAACqD,CAAD,CAA3B,EAAgCD,WAAW,CAACC,CAAD,CAA3C;AACArD,YAAAA,aAAa,CAACqD,CAAD,CAAb,CAAiB9B,MAAjB,GAA0B,KAAK+C,QAA/B;AACA,kBAAMG,CAAC,GAAG,GAAGC,MAAH,CAAU,KAAK/E,KAAL,CAAW8B,QAArB,EAA+BiD,MAA/B,CAAsC1E,aAAa,CAACqD,CAAD,CAAnD,EAAwDsB,IAAxD,CAA6D,CAACC,CAAD,EAAIC,CAAJ,KAAU,KAAKC,QAAL,CAAcF,CAAd,EAAiBC,CAAjB,CAAvE,CAAV;AACA,iBAAKnE,QAAL,CAAc;AACVe,cAAAA,QAAQ,EAAE,CAAC,GAAGgD,CAAJ,CADA;AAEV1B,cAAAA,IAAI,EAAE,EAFI;AAEAC,cAAAA,IAAI,EAAE,EAFN;AAEUC,cAAAA,KAAK,EAAE,EAFjB;AAEqBkB,cAAAA,WAAW,EAAE,EAFlC;AAEsCvB,cAAAA,SAAS,EAAE;AAFjD,aAAd;AAIH,WA3BL,EA4BKjB,KA5BL,CA4BYC,CAAD,IAAOC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,IAAd,CA5BlB;AA6BH;AACJ;AACJ,KAxMkB;;AAAA,SA0MnB+C,QA1MmB,GA0MR,CAACF,CAAD,EAAIC,CAAJ,KAAU;AACjB,UAAID,CAAC,CAAC5D,SAAF,GAAc6D,CAAC,CAAC7D,SAApB,EACI,OAAO,CAAC,CAAR;AACJ,UAAI4D,CAAC,CAAC5D,SAAF,GAAc6D,CAAC,CAAC7D,SAApB,EACI,OAAO,CAAP;AACJ,aAAO,CAAP;AACH,KAhNkB;;AAEf,SAAKrB,KAAL,GAAa;AACT8B,MAAAA,QAAQ,EAAE,EADD;AAETsB,MAAAA,IAAI,EAAE,EAFG;AAGTC,MAAAA,IAAI,EAAE,EAHG;AAITC,MAAAA,KAAK,EAAE,EAJE;AAKTrD,MAAAA,MAAM,EAAE,EALC;AAMTuE,MAAAA,WAAW,EAAE,EANJ;AAOTzC,MAAAA,mBAAmB,EAAE,IAPZ;AAQTf,MAAAA,kBAAkB,EAAE,IARX;AASTM,MAAAA,SAAS,EAAE,KATF;AAUTH,MAAAA,YAAY,EAAE,CAVL;AAWTsB,MAAAA,mBAAmB,EAAE,KAXZ;AAYTQ,MAAAA,SAAS,EAAE;AAZF,KAAb;AAcA,SAAK0B,QAAL,GAAgB,EAAhB;AACA,SAAKS,MAAL,GAAc,EAAd;AACA,SAAK7E,aAAL,GAAqBf,QAAQ,CAAC6F,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyC9D,GAAzC,CAA6ChC,QAAQ,CAAC+F,IAAT,GAAgBC,WAAhB,CAA4BC,GAAzE,EAA8EH,UAA9E,CAAyF,UAAzF,CAArB;AACA9F,IAAAA,QAAQ,CAAC6F,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyC9D,GAAzC,CAA6ChC,QAAQ,CAAC+F,IAAT,GAAgBC,WAAhB,CAA4BC,GAAzE,EAA8E7E,GAA9E,GACKC,IADL,CACWW,GAAD,IAAS;AACX,WAAKkE,QAAL,GAAgBlE,GAAG,CAACG,IAAJ,GAAWgE,SAA3B;AACA,WAAK9C,eAAL,GAAuBrD,QAAQ,CAAC6F,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyC9D,GAAzC,CAA6C,KAAKkE,QAAlD,EAA4DJ,UAA5D,CAAuE,UAAvE,CAAvB;AACH,KAJL,EAKKtD,KALL,CAKYC,CAAD,IAAOC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,IAAd,CALlB;AAMA5C,IAAAA,QAAQ,CAAC6F,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,EAAyC1E,GAAzC,GAA+CC,IAA/C,CAAqD+E,aAAD,IAAmB;AACnEA,MAAAA,aAAa,CAAC3E,IAAd,CAAmB4E,GAAnB,CAAwBrE,GAAD,IAAS;AAE5B,aAAK4D,MAAL,CAAYvB,IAAZ,CAAiB;AACbhC,UAAAA,EAAE,EAAEL,GAAG,CAACG,IAAJ,GAAWE,EADF;AAEbO,UAAAA,IAAI,EAAEZ,GAAG,CAACG,IAAJ,GAAWmE,KAAX,GAAmB,GAAnB,GAAyBtE,GAAG,CAACG,IAAJ,GAAWoE,KAF7B;AAGbC,UAAAA,IAAI,EAAGxE,GAAG,CAACG,IAAJ,GAAWqE;AAHL,SAAjB;AAKA,eAAO,IAAP;AACH,OARD;AASH,KAVD;AAWH;;AAmCDC,EAAAA,iBAAiB,GAAG;AAChB,SAAK7F,WAAL;AACH;;AAyID8F,EAAAA,MAAM,GAAG;AAKL,wBACI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAM,MAAA,SAAS,EAAC,cAAhB;AAA+B,MAAA,QAAQ,EAAE,KAAKpD,YAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAI,MAAA,SAAS,EAAC,eAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uEAA9B,CADJ,eAGI;AACI,MAAA,SAAS,EAAC,SADd;AAEI,MAAA,KAAK,EAAE;AAAEqD,QAAAA,KAAK,EAAE;AAAT,OAFX;AAGI,MAAA,OAAO,EAAC,MAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EAHJ,eAUI;AACI,MAAA,QAAQ,EAAGlE,CAAD,IAAO,KAAKlB,QAAL,CAAc;AAAEqC,QAAAA,IAAI,EAAEnB,CAAC,CAAC/B,MAAF,CAASC;AAAjB,OAAd,CADrB;AAEI,MAAA,IAAI,EAAC,MAFT;AAGI,MAAA,SAAS,EAAC,cAHd;AAII,MAAA,EAAE,EAAC,MAJP;AAKI,MAAA,WAAW,EAAC,qEALhB;AAMI,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWoD,IANtB;AAOI,MAAA,QAAQ,MAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVJ,CAFJ,eAsBI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACI,MAAA,SAAS,EAAC,SADd;AAEI,MAAA,KAAK,EAAE;AAAE+C,QAAAA,KAAK,EAAE;AAAT,OAFX;AAGI,MAAA,OAAO,EAAC,MAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iEADJ,eAQI;AACI,MAAA,QAAQ,EAAGlE,CAAD,IAAO,KAAKlB,QAAL,CAAc;AAAEsC,QAAAA,IAAI,EAAEpB,CAAC,CAAC/B,MAAF,CAASC;AAAjB,OAAd,CADrB;AAEI,MAAA,IAAI,EAAC,MAFT;AAGI,MAAA,SAAS,EAAC,cAHd;AAII,MAAA,EAAE,EAAC,MAJP;AAKI,MAAA,WAAW,EAAC,yDALhB;AAMI,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWqD,IANtB;AAOI,MAAA,QAAQ,MAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,CAtBJ,eAwCI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACI,MAAA,SAAS,EAAC,SADd;AAEI,MAAA,KAAK,EAAE;AAAE8C,QAAAA,KAAK,EAAE;AAAT,OAFX;AAGI,MAAA,OAAO,EAAC,OAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6EADJ,eAQI;AACI,MAAA,QAAQ,EAAGlE,CAAD,IAAO,KAAKlB,QAAL,CAAc;AAAEuC,QAAAA,KAAK,EAAErB,CAAC,CAAC/B,MAAF,CAASC;AAAlB,OAAd,CADrB;AAEI,MAAA,IAAI,EAAC,MAFT;AAGI,MAAA,SAAS,EAAC,cAHd;AAII,MAAA,EAAE,EAAC,OAJP;AAKI,MAAA,WAAW,EAAC,qEALhB;AAMI,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWsD,KANtB;AAOI,MAAA,QAAQ,MAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,CAxCJ,eA0DI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACI,MAAA,SAAS,EAAC,SADd;AAEI,MAAA,KAAK,EAAE;AAAE6C,QAAAA,KAAK,EAAE;AAAT,OAFX;AAGI,MAAA,OAAO,EAAC,aAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ,eASI;AACI,MAAA,QAAQ,EAAGlE,CAAD,IAAO,KAAKlB,QAAL,CAAc;AAAEyD,QAAAA,WAAW,EAAEvC,CAAC,CAAC/B,MAAF,CAASC;AAAxB,OAAd,CADrB;AAEI,MAAA,IAAI,EAAC,MAFT;AAGI,MAAA,SAAS,EAAC,cAHd;AAII,MAAA,EAAE,EAAC,aAJP;AAKI,MAAA,KAAK,EAAE,KAAKH,KAAL,CAAWwE,WALtB;AAMI,MAAA,WAAW,EAAC,gCANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATJ,CA1DJ,eA4EI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACI,MAAA,SAAS,EAAC,SADd;AAEI,MAAA,KAAK,EAAE;AAAE2B,QAAAA,KAAK,EAAE;AAAT,OAFX;AAGI,MAAA,OAAO,EAAC,aAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eASI;AAAO,MAAA,KAAK,EAAC,sBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDADH,eAEI;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,WAAW,EAAC,UAA/B;AAA0C,MAAA,KAAK,EAAE,KAAKtG,KAAL,CAAWuG,UAA5D;AAAwE,MAAA,QAAQ,EAAE,KAAKvG,KAAL,CAAWwG,oBAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,eAGA;AAAK,MAAA,SAAS,EAAE,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2DAHJ,eAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAJJ,CAFA,CADJ,eAWI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEC,KAAKjB,MAAL,CAAYS,GAAZ,CAAgB,CAACS,MAAD,EAASC,KAAT,kBACb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKD,MAAM,CAACzE,EAAZ,CAAJ,eAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKyE,MAAM,CAAClE,IAAZ,CAAxB,eAA8C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKkE,MAAM,CAACN,IAAZ,CAA9C,eACI;AAAI,MAAA,SAAS,EAAEM,MAAM,CAACE,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA6B;AAAO,MAAA,IAAI,EAAC,UAAZ;AAAuB,MAAA,KAAK,EAAC,cAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA7B,CADJ,CADH,CAFD,CAXJ,CAHA,CATJ,CA5EJ,eA8GI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AACI,MAAA,IAAI,EAAC,UADT;AAEI,MAAA,SAAS,EAAC,uBAFd;AAGI,MAAA,EAAE,EAAC,kBAHP;AAII,MAAA,OAAO,EAAE,KAAKxG,KAAL,CAAWiD,SAJxB;AAKI,MAAA,QAAQ,EAAGhB,CAAD,IAAO,KAAKlB,QAAL,CAAc;AAAEkC,QAAAA,SAAS,EAAE,CAAC,KAAKjD,KAAL,CAAWiD;AAAzB,OAAd,CALrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAQI;AACI,MAAA,SAAS,EAAC,yCADd;AAEI,MAAA,KAAK,EAAE;AAAEkD,QAAAA,KAAK,EAAE;AAAT,OAFX;AAGI,MAAA,OAAO,EAAC,aAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gNARJ,CA9GJ,eA8HI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA9HJ,eA+HI;AACI,MAAA,SAAS,EAAC,mCADd;AAEI,MAAA,KAAK,EAAE;AAAEA,QAAAA,KAAK,EAAE,OAAT;AAAkBM,QAAAA,WAAW,EAAE;AAA/B,OAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6DAIe,GAJf,CA/HJ,CADJ,EAuIK,KAAK7D,QAAL,EAvIL,CADJ;AA2IH;;AApW4B;;AAuWjC,eAAejD,QAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./Meetings.css\";\r\n\r\n\r\nimport firebase from \"../config/Firebase\"\r\nimport MeetingList from \"../navBarComponents/meetingComponents/MeetingList\"\r\nimport $ from \"jquery\"\r\nclass Meetings extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            meetings: [],\r\n            date: \"\",\r\n            time: \"\",\r\n            place: \"\",\r\n            search: \"\",\r\n            description: \"\",\r\n            loadingFromFirebase: true,\r\n            lastMeetingVisible: null,\r\n            loadedAll: false,\r\n            futureLength: 0,\r\n            loadingPastMeetings: false,\r\n            scheduled: false\r\n        };\r\n        this.newDocId = \"\";\r\n        this.people = [];\r\n        this.myMeetingsRef = firebase.firestore().collection('Users').doc(firebase.auth().currentUser.uid).collection('Meetings');\r\n        firebase.firestore().collection('Users').doc(firebase.auth().currentUser.uid).get()\r\n            .then((doc) => {\r\n                this.linkUser = doc.data().link_user;\r\n                this.mateMeetingsRef = firebase.firestore().collection('Users').doc(this.linkUser).collection('Meetings');\r\n            })\r\n            .catch((e) => console.log(e.name))\r\n        firebase.firestore().collection('Users').get().then((querySnapshot) => {\r\n            querySnapshot.docs.map((doc) => {\r\n\r\n                this.people.push({\r\n                    id: doc.data().id,\r\n                    name: doc.data().fName + \" \" + doc.data().lName,\r\n                    type:  doc.data().type\r\n                });\r\n                return null;\r\n            });\r\n        });\r\n    }\r\nsearchFilterOnchane = (event)=>{\r\n    this.state({\r\n        search : event.target.value\r\n    }\r\n\r\n    )\r\n}\r\n\r\n    getMeetings = () => {\r\n        var newMeetingObj;\r\n        var futureMeetings = this.myMeetingsRef\r\n            .where('timeStamp', \">=\", ((Date.now() / 1000) - 7200))\r\n            .orderBy(\"timeStamp\", \"desc\")\r\n\r\n        futureMeetings\r\n            .get()\r\n            .then((querySnap) => {\r\n                this.setState({ lastMeetingVisible: querySnap.docs[querySnap.docs.length - 1], futureLength: querySnap.docs.length }, () => {\r\n                    if (querySnap.empty)\r\n                        this.setState({ lastMeetingVisible: { timeStamp: ((Date.now() / 1000) - 7200) } })\r\n                    else if (typeof (this.state.lastMeetingVisible) === 'undefined')\r\n                        this.setState({ loadedAll: true })\r\n                })\r\n                querySnap.forEach((doc) => {\r\n                    newMeetingObj = {};\r\n                    Object.assign(newMeetingObj, doc.data());\r\n                    newMeetingObj.doc_id = doc.id;\r\n                    this.setState({ meetings: [...this.state.meetings, newMeetingObj] })\r\n                })\r\n            })\r\n            .then(() => this.setState({ loadingFromFirebase: false }))\r\n            .catch((e) => console.log(e.name))\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getMeetings();\r\n    }\r\n\r\n    updateTableAfterDelete = (meetingsArr) => {\r\n        this.setState({ meetings: [...meetingsArr] });\r\n    }\r\n\r\n    loadPrev = () => {\r\n        if (typeof (this.state.lastMeetingVisible) === 'undefined')\r\n            return;\r\n        var startFrom;\r\n        if (typeof (this.state.lastMeetingVisible.timeStamp) === 'undefined')\r\n            startFrom = this.state.lastMeetingVisible.data().timeStamp;\r\n        else\r\n            startFrom = this.state.lastMeetingVisible.timeStamp;\r\n        this.setState({ loadingPastMeetings: true });\r\n        var newMeetingObj;\r\n        this.myMeetingsRef\r\n            .orderBy(\"timeStamp\", \"desc\")\r\n            .startAfter(startFrom)\r\n            .limit(5)\r\n            .get()\r\n            .then((querySnap) => {\r\n                if (querySnap.docs.length < 5)\r\n                    this.setState({ loadedAll: true })\r\n                if (querySnap.docs.length === 0)\r\n                    return;\r\n                this.setState({ lastMeetingVisible: querySnap.docs[querySnap.docs.length - 1] })\r\n                querySnap.forEach((doc) => {\r\n                    newMeetingObj = {};\r\n                    Object.assign(newMeetingObj, doc.data());\r\n                    newMeetingObj.doc_id = doc.id;\r\n                    this.setState({ meetings: [...this.state.meetings, newMeetingObj] });\r\n                })\r\n            })\r\n            .then(() => this.setState({ loadingPastMeetings: false }))\r\n            .catch((e) => console.log(e.name))\r\n    }\r\n\r\n    getTable = () => {\r\n        return <MeetingList\r\n            className=\"meeting-list\"\r\n            meetingsArr={this.state.meetings}\r\n            loading={this.state.loadingFromFirebase}\r\n            myUser={this.myMeetingsRef}\r\n            linkUser={this.mateMeetingsRef}\r\n            updateRef={this.updateTableAfterDelete}\r\n            loadPrev={this.loadPrev}\r\n            loadedAll={this.state.loadedAll}\r\n            futureLength={this.state.futureLength}\r\n            loadingPastMeetings={this.state.loadingPastMeetings}\r\n        />\r\n    }\r\n\r\n    handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        var isSure;\r\n        if (!this.state.scheduled) {\r\n            isSure = window.confirm(\r\n                \"האם ברצונך לקבוע פגישה:\\nבתאריך: \" +\r\n                this.state.date +\r\n                \"\\nבשעה: \" +\r\n                this.state.time +\r\n                \"\\nבמיקום: \" +\r\n                this.state.place\r\n            );\r\n        }\r\n        else\r\n            isSure = window.confirm(\r\n                \"האם ברצונך לקבוע 13 פגישות קבועות לשלושת החודשים הקרובים:\\nהחל מתאריך: \" +\r\n                this.state.date +\r\n                \"\\nבשעה: \" +\r\n                this.state.time +\r\n                \"\\nבמיקום: \" +\r\n                this.state.place\r\n            );\r\n        if (isSure) {\r\n            var amount_of_meetings = this.state.scheduled ? 13 : 1;\r\n            var dates = [], newMeetings = [], newMeetingObj = [];\r\n            for (let i = 0; i < amount_of_meetings; i++) {\r\n                var nextDate = (new Date(Date.parse(this.state.date) + (7 * 24 * 60 * 60 * 1000) * i));\r\n                dates.push(nextDate.getFullYear() + \"-\" + (nextDate.getMonth() + 1) + \"-\" + nextDate.getDate());\r\n                var time_stamp = (((Date.parse(dates[i] + \" \" + this.state.time)) / 1000));\r\n                let selected_list = \"\";\r\n                var checked_list = $('.people_check:checked');\r\n                 checked_list.forEach(function(item){\r\n                    if(selected_list!==\"\")selected_list += \",\";\r\n                    selected_list += $(this).parent().attr('person_id');\r\n                });\r\n                newMeetings.push({\r\n                    date: dates[i],\r\n                    send_list: selected_list,\r\n                    timeStamp: time_stamp,\r\n                    place: this.state.place,\r\n                    description: this.state.description\r\n                })\r\n                newMeetingObj.push({});\r\n                this.myMeetingsRef.add(newMeetings[i])\r\n                    .then((docRef) => {\r\n                        this.newDocId = docRef.id;\r\n                        this.mateMeetingsRef.doc(docRef.id).set(newMeetings[i]);\r\n                    })\r\n                    .then(() => {\r\n                        if (!this.state.scheduled && this.state.date !== \"\") {\r\n                            alert(\r\n                                \"נקבעה פגישה בתאריך: \" +\r\n                                this.state.date +\r\n                                \"\\nבשעה: \" +\r\n                                this.state.time +\r\n                                \"\\nבמיקום: \" +\r\n                                this.state.place\r\n                            );\r\n                        }\r\n                        else if (i === 0)\r\n                            alert(\r\n                                \"נקבעו 13 פגישות קבועות לשלושת החודשים הקרובים.\"\r\n                            );\r\n                        Object.assign(newMeetingObj[i], newMeetings[i]);\r\n                        newMeetingObj[i].doc_id = this.newDocId;\r\n                        const d = [].concat(this.state.meetings).concat(newMeetingObj[i]).sort((a, b) => this.sortFunc(a, b));\r\n                        this.setState({\r\n                            meetings: [...d],\r\n                            date: \"\", time: \"\", place: \"\", description: \"\", scheduled: false\r\n                        });\r\n                    })\r\n                    .catch((e) => console.log(e.name));\r\n            }\r\n        }\r\n    }\r\n\r\n    sortFunc = (a, b) => {\r\n        if (a.timeStamp > b.timeStamp)\r\n            return -1;\r\n        if (a.timeStamp < b.timeStamp)\r\n            return 1;\r\n        return 0;\r\n    }\r\n\r\n    render() {\r\n        \r\n    \r\n        \r\n\r\n        return (\r\n            <div className=\"main-background\" >\r\n                <form className=\"meeting-form\" onSubmit={this.handleSubmit}>\r\n                    <br />\r\n                    <div className=\"form-group\">\r\n                        <h1 className=\"meeting-title\"><u>קביעת פגישה</u></h1>\r\n\r\n                        <label\r\n                            className=\"fLabels\"\r\n                            style={{ float: \"right\" }}\r\n                            htmlFor=\"date\"\r\n                        >\r\n                            תאריך הפגישה\r\n                        </label>\r\n                        <input\r\n                            onChange={(e) => this.setState({ date: e.target.value })}\r\n                            type=\"date\"\r\n                            className=\"form-control\"\r\n                            id=\"date\"\r\n                            placeholder=\"תאריך הפגישה\"\r\n                            value={this.state.date}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label\r\n                            className=\"fLabels\"\r\n                            style={{ float: \"right\" }}\r\n                            htmlFor=\"hour\"\r\n                        >\r\n                            שעת הפגישה\r\n                        </label>\r\n                        <input\r\n                            onChange={(e) => this.setState({ time: e.target.value })}\r\n                            type=\"time\"\r\n                            className=\"form-control\"\r\n                            id=\"hour\"\r\n                            placeholder=\"שעת הפגישה\"\r\n                            value={this.state.time}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label\r\n                            className=\"fLabels\"\r\n                            style={{ float: \"right\" }}\r\n                            htmlFor=\"place\"\r\n                        >\r\n                            מיקום הפגישה\r\n                        </label>\r\n                        <input\r\n                            onChange={(e) => this.setState({ place: e.target.value })}\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            id=\"place\"\r\n                            placeholder=\"מיקום הפגישה\"\r\n                            value={this.state.place}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label\r\n                            className=\"fLabels\"\r\n                            style={{ float: \"right\" }}\r\n                            htmlFor=\"description\"\r\n                        >\r\n                            {/* <!-description--> */}\r\n                            תיאור\r\n                        </label>\r\n                        <input\r\n                            onChange={(e) => this.setState({ description: e.target.value })}\r\n                            type=\"text\"\r\n                            className=\"form-control\"\r\n                            id=\"description\"\r\n                            value={this.state.description}\r\n                            placeholder=\"תיאור\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label\r\n                            className=\"fLabels\"\r\n                            style={{ float: \"right\" }}\r\n                            htmlFor=\"description\"\r\n                        >\r\n                         \r\n                            \r\n                        </label>\r\n                        <table class=\"table table-bordered\"  >\r\n                           <h6>משתתפים</h6>\r\n                            <input type=\"text\" placeholder=\"Enter ID\" value={this.props.inputvalue} onChange={this.props.personFilterOnChange}></input>\r\n                        <div className ='container__table'>\r\n                            <thead>\r\n                            \r\n                            <tr>\r\n                                <td>ת.ז</td>\r\n                                <td>שם</td>\r\n                                <td>סוג משתמש</td>\r\n                                <td>בחר</td>\r\n                                \r\n                            </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                            \r\n                            {this.people.map((person, index) => (\r\n                                <tr><td>{person.id}</td><td>{person.name}</td><td>{person.type}</td>\r\n                                    <td person_id={person.email}><input type='checkbox' class='people_check'/></td></tr>\r\n                            ))}\r\n                           \r\n                            </tbody>\r\n                            </div>\r\n                        </table> \r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            className=\"form-check-input w-25\"\r\n                            id=\"scheduledMeeting\"\r\n                            checked={this.state.scheduled}\r\n                            onChange={(e) => this.setState({ scheduled: !this.state.scheduled })}\r\n                        />\r\n                        <label\r\n                            className=\"form-check-label check-meeting-lbl w-75\"\r\n                            style={{ float: \"right\" }}\r\n                            htmlFor=\"description\"\r\n                        >\r\n                            פגישות קבועות - לשלושת החודשים הקרובים\r\n                        </label>\r\n                    </div>\r\n                    <br />\r\n                    <button\r\n                        className=\"btn btn-success setup-meeting-btn\"\r\n                        style={{ float: \"right\", marginRight: \"700px\" }}\r\n                    >\r\n                        קבע פגישה!{\" \"}\r\n                    </button>\r\n                </form>\r\n                {this.getTable()}\r\n            </div >\r\n        );\r\n    }\r\n}\r\n\r\nexport default Meetings;"]},"metadata":{},"sourceType":"module"}