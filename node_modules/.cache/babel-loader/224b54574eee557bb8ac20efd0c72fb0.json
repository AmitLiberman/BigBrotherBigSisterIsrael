{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\ahmad\\\\Downloads\\\\BigBrotherBigSisterIsrael-master\\\\BigBrotherBigSisterIsrael-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import App from\"../mainPageComponents/App\";import LoginForm from\"../loginComponents/LoginForm\";import AdminPage from\"../adminComponents/main/AdminPage\";import firebase from\"../config/Firebase\";var AppIndex=/*#__PURE__*/function(_Component){_inherits(AppIndex,_Component);var _super=_createSuper(AppIndex);function AppIndex(props){var _this;_classCallCheck(this,AppIndex);_this=_super.call(this,props);_this.determineIfAdmin=function(type){if(type===\"אדמין\"||_this.state.isAdmin)_this.setState({isAdmin:true});else _this.setState({isAdmin:false});};_this.exitAdmin=function(){_this.setState({isLoggedIn:false,isAdmin:false});};_this.onAuthChanged=function(user){if(user){// User is signed in.\nvar userType;var userUid=user.uid;_this.usersRef.doc(userUid).get().then(function(doc){if(doc.exists)userType=doc.data().type;else userType=\"\";}).then(function(){_this.determineIfAdmin(userType);}).then(function(){return _this.setState({isLoggedIn:true});}).catch(function(e){return console.log(e.name);});}else// No user is signed in.\n_this.setState({isLoggedIn:false});};_this.state={isLoggedIn:false,isAdmin:false};_this.usersRef=firebase.firestore().collection('Users');return _this;}_createClass(AppIndex,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;firebase.auth().onAuthStateChanged(function(user){return _this2.onAuthChanged(user);});}},{key:\"renderContent\",value:function renderContent(){if(this.state.isLoggedIn&&!this.state.isAdmin)return/*#__PURE__*/React.createElement(App,null);if(this.state.isLoggedIn&&this.state.isAdmin)return/*#__PURE__*/React.createElement(AdminPage,{exitAdmin:this.exitAdmin});else return/*#__PURE__*/React.createElement(LoginForm,{determineIfAdmin:this.determineIfAdmin,isLoggedIn:this.state.isLoggedIn});}},{key:\"render\",value:function render(){return this.renderContent();}}]);return AppIndex;}(Component);export default AppIndex;","map":{"version":3,"sources":["C:/Users/ahmad/Downloads/BigBrotherBigSisterIsrael-master/BigBrotherBigSisterIsrael-master/src/appIndex/AppIndex.jsx"],"names":["React","Component","App","LoginForm","AdminPage","firebase","AppIndex","props","determineIfAdmin","type","state","isAdmin","setState","exitAdmin","isLoggedIn","onAuthChanged","user","userType","userUid","uid","usersRef","doc","get","then","exists","data","catch","e","console","log","name","firestore","collection","auth","onAuthStateChanged","renderContent"],"mappings":"41BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,GAAP,KAAgB,2BAAhB,CACA,MAAOC,CAAAA,SAAP,KAAsB,8BAAtB,CACA,MAAOC,CAAAA,SAAP,KAAsB,mCAAtB,CACA,MAAOC,CAAAA,QAAP,KAAqB,oBAArB,C,GAEMC,CAAAA,Q,oGACF,kBAAYC,KAAZ,CAAmB,0CACf,uBAAMA,KAAN,EADe,MASnBC,gBATmB,CASA,SAACC,IAAD,CAAU,CACzB,GAAIA,IAAI,GAAK,OAAT,EAAoB,MAAKC,KAAL,CAAWC,OAAnC,CACI,MAAKC,QAAL,CAAc,CAAED,OAAO,CAAE,IAAX,CAAd,EADJ,IAGI,OAAKC,QAAL,CAAc,CAAED,OAAO,CAAE,KAAX,CAAd,EACP,CAdkB,OAgBnBE,SAhBmB,CAgBP,UAAM,CACd,MAAKD,QAAL,CAAc,CAAEE,UAAU,CAAE,KAAd,CAAqBH,OAAO,CAAE,KAA9B,CAAd,EACH,CAlBkB,OAoBnBI,aApBmB,CAoBH,SAACC,IAAD,CAAU,CACtB,GAAIA,IAAJ,CAAU,CACN;AACA,GAAIC,CAAAA,QAAJ,CACA,GAAIC,CAAAA,OAAO,CAAGF,IAAI,CAACG,GAAnB,CACA,MAAKC,QAAL,CAAcC,GAAd,CAAkBH,OAAlB,EAA2BI,GAA3B,GACKC,IADL,CACU,SAAAF,GAAG,CAAI,CACT,GAAIA,GAAG,CAACG,MAAR,CACIP,QAAQ,CAAGI,GAAG,CAACI,IAAJ,GAAWhB,IAAtB,CADJ,IAGIQ,CAAAA,QAAQ,CAAG,EAAX,CACP,CANL,EAOKM,IAPL,CAOU,UAAM,CACR,MAAKf,gBAAL,CAAsBS,QAAtB,EACH,CATL,EAUKM,IAVL,CAUU,iBAAM,OAAKX,QAAL,CAAc,CAAEE,UAAU,CAAE,IAAd,CAAd,CAAN,EAVV,EAWKY,KAXL,CAWW,SAACC,CAAD,QAAOC,CAAAA,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,IAAd,CAAP,EAXX,EAYH,CAhBD,IAkBI;AACA,MAAKlB,QAAL,CAAc,CAAEE,UAAU,CAAE,KAAd,CAAd,EACP,CAzCkB,CAEf,MAAKJ,KAAL,CAAa,CACTI,UAAU,CAAE,KADH,CAETH,OAAO,CAAE,KAFA,CAAb,CAIA,MAAKS,QAAL,CAAgBf,QAAQ,CAAC0B,SAAT,GAAqBC,UAArB,CAAgC,OAAhC,CAAhB,CANe,aAOlB,C,kFAoCmB,iBAChB3B,QAAQ,CAAC4B,IAAT,GAAgBC,kBAAhB,CAAmC,SAAClB,IAAD,QAAU,CAAA,MAAI,CAACD,aAAL,CAAmBC,IAAnB,CAAV,EAAnC,EACH,C,qDAEe,CACZ,GAAI,KAAKN,KAAL,CAAWI,UAAX,EAAyB,CAAC,KAAKJ,KAAL,CAAWC,OAAzC,CACI,mBAAQ,oBAAC,GAAD,MAAR,CACJ,GAAI,KAAKD,KAAL,CAAWI,UAAX,EAAyB,KAAKJ,KAAL,CAAWC,OAAxC,CACI,mBAAQ,oBAAC,SAAD,EAAW,SAAS,CAAE,KAAKE,SAA3B,EAAR,CADJ,IAGI,oBAAQ,oBAAC,SAAD,EAAW,gBAAgB,CAAE,KAAKL,gBAAlC,CAAoD,UAAU,CAAE,KAAKE,KAAL,CAAWI,UAA3E,EAAR,CACP,C,uCAEQ,CACL,MAAQ,MAAKqB,aAAL,EAAR,CACH,C,sBA3DkBlC,S,EA8DvB,cAAeK,CAAAA,QAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport App from \"../mainPageComponents/App\";\r\nimport LoginForm from \"../loginComponents/LoginForm\";\r\nimport AdminPage from \"../adminComponents/main/AdminPage\";\r\nimport firebase from \"../config/Firebase\"\r\n\r\nclass AppIndex extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoggedIn: false,\r\n            isAdmin: false\r\n        };\r\n        this.usersRef = firebase.firestore().collection('Users');\r\n    }\r\n\r\n    determineIfAdmin = (type) => {\r\n        if (type === \"אדמין\" || this.state.isAdmin)\r\n            this.setState({ isAdmin: true });\r\n        else\r\n            this.setState({ isAdmin: false });\r\n    }\r\n\r\n    exitAdmin = () => {\r\n        this.setState({ isLoggedIn: false, isAdmin: false })\r\n    }\r\n\r\n    onAuthChanged = (user) => {\r\n        if (user) {\r\n            // User is signed in.\r\n            var userType;\r\n            var userUid = user.uid;\r\n            this.usersRef.doc(userUid).get()\r\n                .then(doc => {\r\n                    if (doc.exists)\r\n                        userType = doc.data().type;\r\n                    else\r\n                        userType = \"\";\r\n                })\r\n                .then(() => {\r\n                    this.determineIfAdmin(userType);\r\n                })\r\n                .then(() => this.setState({ isLoggedIn: true }))\r\n                .catch((e) => console.log(e.name));\r\n        }\r\n        else\r\n            // No user is signed in.\r\n            this.setState({ isLoggedIn: false });\r\n    }\r\n\r\n    componentDidMount() {\r\n        firebase.auth().onAuthStateChanged((user) => this.onAuthChanged(user));\r\n    }\r\n\r\n    renderContent() {\r\n        if (this.state.isLoggedIn && !this.state.isAdmin)\r\n            return (<App />)\r\n        if (this.state.isLoggedIn && this.state.isAdmin)\r\n            return (<AdminPage exitAdmin={this.exitAdmin} />)\r\n        else\r\n            return (<LoginForm determineIfAdmin={this.determineIfAdmin} isLoggedIn={this.state.isLoggedIn} />)\r\n    }\r\n\r\n    render() {\r\n        return (this.renderContent());\r\n    }\r\n}\r\n\r\nexport default AppIndex;\r\n"]},"metadata":{},"sourceType":"module"}