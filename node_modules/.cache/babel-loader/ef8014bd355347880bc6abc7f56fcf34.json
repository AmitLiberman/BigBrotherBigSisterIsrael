{"ast":null,"code":"var _jsxFileName = \"/Users/wadie/BigBrotherBigSisterIsrael/src/adminComponents/partial/DeleteUser.jsx\";\nimport React, { Component } from \"react\";\nimport \"./DeleteUser.css\";\nimport firebase from \"../../config/Firebase\";\n\nclass DeleteUser extends Component {\n  constructor() {\n    super();\n\n    this.valid = querySnapshot => {\n      this.usersRef.where('id', '==', this.state.id).get().then(querySnapshot => {\n        if (querySnapshot.empty) {\n          alert(\"המשתמש שאתה מנסה למחוק לא קיים במערכת.\");\n          throw Error(500);\n        }\n      }).catch(e => console.log(\"משתמש לא קיים במערכת\"));\n    };\n\n    this.deleteUser = event => {\n      event.preventDefault();\n      this.valid();\n      this.usersRef.where('id', '==', this.state.id).limit(1).get().then(querySnapshot => {\n        querySnapshot.forEach(doc => {\n          this.setState({\n            email: doc.data().email\n          }, () => {\n            var con = window.confirm(\"האם אתה בטוח שברצונך למחוק את \" + doc.data().fName + \" \" + doc.data().lName + \"?\");\n\n            if (con) {\n              if (typeof doc.data().link_user !== 'undefined' && doc.data().link_user !== \"\") this.usersRef.doc(doc.data().link_user).update({\n                link_user: \"\"\n              });\n              doc.ref.delete().then(() => {\n                alert(`המשתמש ${doc.data().fName + \" \" + doc.data().lName} נמחק מהמערכת.`);\n                this.setState({\n                  id: \"\"\n                });\n              });\n            }\n          });\n        });\n      }).catch(e => console.log(e.name));\n    };\n\n    this.state = {\n      id: \"\",\n      email: \"\"\n    };\n    this.usersRef = firebase.firestore().collection('Users');\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"del-user-form\",\n      onSubmit: this.deleteUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"delete-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"u\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 38\n      }\n    }, \"\\u05DE\\u05D7\\u05D9\\u05E7\\u05EA \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"del-lab\",\n      htmlFor: \"inputPassword3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }, \"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"number\",\n      className: \"form-control\",\n      id: \"inputPassword3\",\n      placeholder: \"\\u05EA\\u05E2\\u05D5\\u05D3\\u05EA \\u05D6\\u05D4\\u05D5\\u05EA\",\n      value: this.state.id,\n      onChange: e => this.setState({\n        id: e.target.value\n      }),\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-danger del-btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 13\n      }\n    }, \"\\u05D4\\u05E1\\u05E8 \\u05DE\\u05E9\\u05EA\\u05DE\\u05E9\"))));\n  }\n\n}\n\nexport default DeleteUser;","map":{"version":3,"sources":["/Users/wadie/BigBrotherBigSisterIsrael/src/adminComponents/partial/DeleteUser.jsx"],"names":["React","Component","firebase","DeleteUser","constructor","valid","querySnapshot","usersRef","where","state","id","get","then","empty","alert","Error","catch","e","console","log","deleteUser","event","preventDefault","limit","forEach","doc","setState","email","data","con","window","confirm","fName","lName","link_user","update","ref","delete","name","firestore","collection","render","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./DeleteUser.css\";\r\nimport firebase from \"../../config/Firebase\"\r\n\r\nclass DeleteUser extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      id: \"\",\r\n      email: \"\"\r\n    }\r\n    this.usersRef = firebase.firestore().collection('Users');\r\n  }\r\n\r\n  valid = (querySnapshot) => {\r\n    this.usersRef.where('id', '==', this.state.id)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        if (querySnapshot.empty) {\r\n          alert(\"המשתמש שאתה מנסה למחוק לא קיים במערכת.\");\r\n          throw Error(500);\r\n        }\r\n      })\r\n      .catch((e) => console.log(\"משתמש לא קיים במערכת\"));\r\n  }\r\n\r\n  deleteUser = (event) => {\r\n    event.preventDefault();\r\n    this.valid();\r\n    this.usersRef.where('id', '==', this.state.id)\r\n      .limit(1)\r\n      .get()\r\n      .then((querySnapshot) => {\r\n        querySnapshot.forEach(doc => {\r\n          this.setState({ email: doc.data().email }, () => {\r\n            var con = window.confirm(\"האם אתה בטוח שברצונך למחוק את \" + doc.data().fName + \" \" + doc.data().lName + \"?\")\r\n            if (con) {\r\n              if (typeof (doc.data().link_user) !== 'undefined' && doc.data().link_user !== \"\")\r\n                this.usersRef.doc(doc.data().link_user).update({ link_user: \"\" })\r\n              doc.ref.delete()\r\n                .then(() => {\r\n                  alert(`המשתמש ${doc.data().fName + \" \" + doc.data().lName} נמחק מהמערכת.`);\r\n                  this.setState({ id: \"\" })\r\n                }\r\n                );\r\n            }\r\n          });\r\n        });\r\n      })\r\n      .catch((e) => console.log(e.name))\r\n  }\r\n\r\n  render() {\r\n    return (\r\n\r\n      <form className=\"del-user-form\" onSubmit={this.deleteUser}>\r\n        <h1 className=\"delete-title\"><u>מחיקת משתמש</u></h1>\r\n        <div className=\"form-group row\">\r\n          <label className=\"del-lab\" htmlFor=\"inputPassword3\">תעודת זהות</label>\r\n          <div className=\"col-sm-10\">\r\n            <input\r\n              type=\"number\"\r\n              className=\"form-control\"\r\n              id=\"inputPassword3\"\r\n              placeholder=\"תעודת זהות\"\r\n              value={this.state.id}\r\n              onChange={(e) => this.setState({ id: e.target.value })} required />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"form-group row\">\r\n          <div className=\"col-sm-10\">\r\n            <button type=\"submit\" className=\"btn btn-danger del-btn\">הסר משתמש</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DeleteUser;\r\n"]},"metadata":{},"sourceType":"module"}